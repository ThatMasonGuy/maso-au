import{x as Q,y as W}from"./@firebase-CBgXa-9_.js";import{i as X,b as O,c as z,r as S}from"./index-fh3STtDl.js";import{_ as Y,a as Z,b as D,c as g,d as ee,e as p}from"./TableRow-yn4ap3en.js";import{d as N,_ as H,a as q,b as F,c as V}from"./SelectScrollDownButton-BK2d6S2D.js";import{_ as te,a as R,b as G,c as oe}from"./TabsContent-C053e7-p.js";import{_ as ae}from"./AdminSidebar-DAKwD2Ft.js";import{r as h,m as J,y as le,b as r,d as c,e as l,a8 as T,L as d,J as o,u as e,E as a,P as b,T as w,K as C,ah as se,c as I,A as ie,M as n,D as L}from"./@vue-DsGlF1-j.js";import{d as ne}from"./@heroicons-DH5_RU0z.js";import{u as re}from"./useHashNavigation-BaConXdy.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";import"./radix-vue-6Z8x3TUN.js";import"./@internationalized-D5LszBdy.js";import"./@swc-BOtJyCjG.js";import"./@floating-ui-B6PpBHZy.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vue-sonner-B2EpXGAv.js";import"./vue-router-CrvMPvpV.js";import"./firebase-BQhzl84B.js";import"./vuex--kc_uza-.js";import"./@unovis-B16_51NZ.js";import"./@emotion-Dz_S_Xyw.js";import"./stylis-YPZU7XtI.js";import"./d3-transition-fhQpLGwb.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-DY0Cqdkz.js";import"./d3-color-Ceo1QMNe.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-Ox4sgw_u.js";import"./d3-interpolate-path-CTc7ZuM7.js";import"./striptags-CDKagow6.js";import"./@vueup-qMjKR5Ws.js";import"./quill-delta-COPIFlMW.js";import"./fast-diff-DNDSwfiB.js";import"./lodash.clonedeep-CrPEM4m0.js";import"./lodash.isequal-CemT60YI.js";import"./to-px-DReLD3CO.js";import"./parse-unit-3UrBcP19.js";import"./d3-array-BJvpcdQ_.js";import"./@juggle-C8OzoCMD.js";import"./d3-axis-Cf4shvhW.js";import"./d3-scale-A6k9qkjg.js";import"./internmap-BkD7Hj8s.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-COsUQkot.js";import"./d3-time-B8hJ2rEE.js";import"./d3-shape-D7Hvm6M3.js";import"./d3-path-CimkQT29.js";import"./throttle-debounce-BnOnwhtV.js";import"./embla-carousel-vue-CXHqejTr.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-QtEXB4oT.js";import"./@vueuse-H75eWtDf.js";import"./embla-carousel-autoplay-0OO14Ffu.js";import"./@radix-icons-C7iqcNif.js";import"./vuex-persistedstate-D4njCX8q.js";import"./maska-Cp-LWreF.js";const ue={class:"flex shadow-xl hover:shadow-2xl transition-all duration-300"},de={key:0,class:"absolute z-[999] right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},ce={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},me=["onClick"],pe={__name:"DropdownButton",props:{buttonText:{type:String,required:!0},dropdownOptions:{type:Array,required:!0}},emits:["optionSelected","buttonClick"],setup(M,{emit:x}){const f=h(null),m=x,u=h(!1),_=()=>{u.value=!u.value},k=()=>{m("buttonClick")},A=v=>{m("optionSelected",v),u.value=!1},$=v=>{f.value&&!f.value.contains(v.target)&&(u.value=!1)};return J(()=>{document.addEventListener("click",$)}),le(()=>{document.removeEventListener("click",$)}),(v,U)=>(r(),c("div",{class:"relative inline-block text-left",ref_key:"dropdownRef",ref:f},[l("div",ue,[l("button",{onClick:k,class:T(["px-4 py-2 text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 rounded-l-md transition-colors duration-300"])},d(M.buttonText),1),l("button",{onClick:_,class:T(["px-2 py-2 text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 rounded-r-md border-l border-gray-700 transition-colors duration-300"])},[o(e(ne),{class:T([{"rotate-180":u.value},"w-4 h-4 transition-transform duration-200"])},null,8,["class"])])]),o(se,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:a(()=>[u.value?(r(),c("div",de,[l("div",ce,[(r(!0),c(b,null,w(M.dropdownOptions,y=>(r(),c("a",{key:y.value,onClick:E=>A(y),href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem"},d(y.label),9,me))),128))])])):C("v-if",!0)]),_:1})],512))}},fe={class:"bg-gray-100 min-h-screen flex ml-16"},_e={class:"flex flex-col flex-1 px-4 py-6"},ve=l("h1",{class:"text-3xl font-semibold text-gray-700 mb-6"},"Courses and Sessions Management",-1),ge={class:"bg-white rounded-lg shadow-md p-6"},he=l("h2",{class:"text-2xl font-semibold"},"Upcoming Sessions",-1),xe={class:"flex mt-4 space-x-4 justify-between"},ye={class:"bg-white rounded-lg shadow-md py-6"},be={class:"flex items-center justify-between px-6"},we=l("h2",{class:"text-2xl font-semibold"},"Edit Courses",-1),Ce={class:"flex mt-4 space-x-4 justify-between px-6"},ke={class:"flex md:justify-start sm:flex-wrap justify-center mt-6"},$e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7 5xl:grid-cols-8 6xl:grid-cols-9 gap-6 mx-6"},Se=["onClick"],Ve={class:"relative"},Le=["src","alt"],Me=l("div",{class:"absolute inset-x-0 bottom-0 h-[70%] group-hover:h-[90%] bg-gradient-to-b from-transparent via-transparent to-90% to-white transition-all ease-in-out duration-300"},null,-1),Ae={class:"p-4 relative z-10 flex flex-col -mt-8 group-hover:-mt-12 transition-all duration-300"},Ee={class:"text-lg font-semibold mb-2"},De=["innerHTML"],Te={class:"absolute bottom-4 inset-x-4 flex justify-between items-center text-sm text-gray-500"},Ue={class:"truncate ml-2 text-right"},qt={__name:"CoursesAndSessions",setup(M){const x=h([]),f=h([]),m=h("all"),u=h(""),{activeTab:_,updateHash:k}=re("upcomingsessions",["editcourses","upcomingsessions"]),A=Q(X,"learningManagementSystem/tempestStudios/courses");J(async()=>{try{const s=await W(A);x.value=s.docs.map(i=>({...i.data(),id:i.id}))}catch(s){console.error("Error fetching courses:",s)}finally{k(_.value)}});const $=s=>{S.push({name:"LMS Admin - Edit Course",params:{id:s.id}})},v=s=>{s==="bulk-import"&&S.push("/auth/learning/admin/bulkimport")},U=()=>{S.push("/auth/learning/admin/addcourse")},y=s=>{console.log("Viewing live course:",s.title),S.push({name:"LMS Admin - Sessions",params:{id:s.id}})},E=I(()=>{const s=new Set;return x.value.forEach(i=>{i.courseCategory.forEach(t=>s.add(t))}),Array.from(s)}),K=I(()=>x.value.filter(s=>{const i=m.value==="all"||s.courseCategory.includes(m.value),t=s.title.toLowerCase().includes(u.value.toLowerCase())||s.description.toLowerCase().includes(u.value.toLowerCase());return i&&t})),j=s=>new Date(s).toLocaleDateString("en-AU",{year:"numeric",month:"long",day:"numeric"}),P=s=>s.map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(", ");return(s,i)=>(r(),c("div",fe,[o(ae,{class:"shadow-2xl"}),l("div",_e,[ve,o(e(oe),{modelValue:e(_),"onUpdate:modelValue":[i[4]||(i[4]=t=>ie(_)?_.value=t:null),e(k)],class:"mb-6"},{default:a(()=>[o(e(te),null,{default:a(()=>[o(e(R),{value:"upcomingsessions"},{default:a(()=>[n("Upcoming Sessions")]),_:1}),o(e(R),{value:"editcourses"},{default:a(()=>[n("Edit Courses")]),_:1})]),_:1}),C(" Upcoming Sessions Table "),o(e(G),{value:"upcomingsessions"},{default:a(()=>[l("div",ge,[he,l("div",xe,[o(e(N),{modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=t=>m.value=t)},{default:a(()=>[o(e(H),{class:"w-[180px]"},{default:a(()=>[o(e(q),{placeholder:"Filter by category"})]),_:1}),o(e(F),null,{default:a(()=>[o(e(V),{value:"all"},{default:a(()=>[n("All Categories")]),_:1}),(r(!0),c(b,null,w(E.value,t=>(r(),L(e(V),{key:t,value:t},{default:a(()=>[n(d(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(e(O),{modelValue:u.value,"onUpdate:modelValue":i[1]||(i[1]=t=>u.value=t),placeholder:"Search courses...",class:"max-w-[300px]"},null,8,["modelValue"])]),o(e(Y),{class:"mt-4"},{default:a(()=>[o(e(Z),null,{default:a(()=>[o(e(D),null,{default:a(()=>[o(e(g),null,{default:a(()=>[n("Course")]),_:1}),o(e(g),null,{default:a(()=>[n("Start Date")]),_:1}),o(e(g),null,{default:a(()=>[n("End Date")]),_:1}),o(e(g),null,{default:a(()=>[n("Capacity")]),_:1}),o(e(g),null,{default:a(()=>[n("Enrolled")]),_:1}),o(e(g),null,{default:a(()=>[n("Actions")]),_:1})]),_:1})]),_:1}),o(e(ee),null,{default:a(()=>[f.value.length===0?(r(),L(e(D),{key:0},{default:a(()=>[o(e(p),{colspan:"6",class:"text-center py-4"},{default:a(()=>[n("No upcoming sessions found. ")]),_:1})]),_:1})):C("v-if",!0),(r(!0),c(b,null,w(f.value,t=>(r(),L(e(D),{key:t.id},{default:a(()=>[o(e(p),null,{default:a(()=>[n(d(t.courseTitle),1)]),_:2},1024),o(e(p),null,{default:a(()=>[n(d(j(t.startDate)),1)]),_:2},1024),o(e(p),null,{default:a(()=>[n(d(j(t.endDate)),1)]),_:2},1024),o(e(p),null,{default:a(()=>[n(d(t.capacity),1)]),_:2},1024),o(e(p),null,{default:a(()=>[n(d(t.enrolled),1)]),_:2},1024),o(e(p),null,{default:a(()=>[o(e(z),{variant:"outline",size:"sm",onClick:B=>s.openSessionManagement(t)},{default:a(()=>[n("Manage")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),C(" All Courses Grid "),o(e(G),{value:"editcourses"},{default:a(()=>[l("div",ye,[l("div",be,[we,o(pe,{buttonText:"Add Course",dropdownOptions:[{label:"Bulk import",value:"bulk-import"}],onOptionSelected:v,onButtonClick:U})]),l("div",Ce,[o(e(N),{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=t=>m.value=t)},{default:a(()=>[o(e(H),{class:"w-[180px]"},{default:a(()=>[o(e(q),{placeholder:"Filter by category"})]),_:1}),o(e(F),null,{default:a(()=>[o(e(V),{value:"all"},{default:a(()=>[n("All Categories")]),_:1}),(r(!0),c(b,null,w(E.value,t=>(r(),L(e(V),{key:t,value:t},{default:a(()=>[n(d(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(e(O),{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=t=>u.value=t),placeholder:"Search courses...",class:"max-w-[300px]"},null,8,["modelValue"])]),l("div",ke,[l("div",$e,[C(" Course Grid "),(r(!0),c(b,null,w(K.value,t=>(r(),c("div",{key:t.courseId,onClick:B=>$(t),class:"bg-white w-72 h-[270px] rounded-lg shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer relative group overflow-hidden"},[l("div",Ve,[l("img",{src:t.image,alt:t.title,class:"min-w-full h-[172px] object-cover object-center"},null,8,Le),Me]),l("div",Ae,[l("h3",Ee,d(t.title),1),l("div",{class:"text-sm line-clamp-2 group-hover:line-clamp-3 text-gray-600 mb-2 h-9 overflow-hidden group-hover:h-[50px] transition-all duration-300",innerHTML:t.description},null,8,De)]),l("div",Te,[l("span",null,d(t.length.value)+" "+d(t.length.value===1?t.length.unit.slice(0,-1):t.length.unit),1),l("span",Ue,d(P(t.courseCategory)),1)]),o(e(z),{class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",variant:"secondary",size:"sm",onClick:B=>y(t)},{default:a(()=>[n(" View live ")]),_:2},1032,["onClick"])],8,Se))),128))])])])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])]))}};export{qt as default};
