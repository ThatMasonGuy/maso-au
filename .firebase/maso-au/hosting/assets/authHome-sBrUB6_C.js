import{_ as p,b as k,d as R,f as _}from"./index-Bf76Ieb6.js";import{b as d,d as i,O as b,r as h,c as I,e as c,D as f,u as v,v as S,K as $,E as L,a9 as V,aa as B,F as C,G as D,q as N,H as F}from"./@vue-CggBly_Q.js";import{F as u}from"./vue-sonner-ClEJ3d5N.js";import{m as P,h as g,q as j,j as q}from"./@firebase-DkCrMZ0w.js";import{u as E}from"./vuex-8-XCUVMt.js";import"./radix-vue-BH5BXNPk.js";import"./@floating-ui-Bx-9wRsN.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vaul-vue-H4ZVHYe6.js";import"./vue-router-DtMHBB6X.js";import"./@heroicons-DUWEU5Xr.js";import"./firebase-BfrZvKqU.js";import"./jspdf-CVWcoUId.js";import"./@babel-BsCcpEdk.js";import"./fflate-Cf-_J6lE.js";import"./@vueuse-Ce_WHB-y.js";import"./@radix-icons-BiHLxEe6.js";import"./vuex-persistedstate-D4njCX8q.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";const H={class:"flex items-center justify-center h-60 w-60 bg-gray-700 text-gray-200 rounded-lg border border-gray-300"},z={__name:"PlaceholderComponent",props:{componentId:Number},setup(a){return(l,s)=>(d(),i("div",H,b(a.componentId),1))}},n=p(z,[["__scopeId","data-v-20e3b5b4"]]),A=a=>(V("data-v-3fdb79c3"),a=a(),B(),a),G={class:"h-full w-96 bg-gray-800 text-gray-200 rounded-lg shadow-lg p-6"},M=A(()=>c("h1",{class:"text-3xl font-bold mb-6"},"URL Shortener",-1)),T={class:"mb-6"},K={class:"flex items-center"},O={key:0,class:"bg-gray-700 p-4 rounded-md"},Y={class:"break-all text-lg"},J={__name:"UrlShorten",setup(a){const l=E(),s=h(""),m=h(""),o=I(()=>l.getters.user),x=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<5;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},y=async()=>{let r,e;do{r=x();const t=g(_,"shortenedUrls",r);e=await q(t)}while(e.exists());return r},U=async()=>{if(!o.value){u.error("You need to be logged in to shorten URLs");return}if(!/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w\.-]*)*\/?(\?[^\s]*)?$/.exec(s.value)){console.log("URL validation failed for:",s.value),console.log("Validation failed because the URL does not match the expected format."),u.error("Please enter a valid URL");return}const t=await y(),w=`https://maso.au/r/${t}`;try{await P(g(_,"shortenedUrls",t),{originalUrl:s.value,writtenBy:o.value.uid,writtenByUsername:o.value.userName,timestamp:j()}),m.value=w,u.success("URL successfully shortened")}catch{u.error("Failed to shorten URL")}};return(r,e)=>(d(),i("div",G,[M,c("div",T,[c("div",K,[f(v(k),{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),class:"bg-gray-700 flex-grow rounded-l-md",type:"text",placeholder:"Enter URL"},null,8,["modelValue"]),f(v(R),{class:"ml-2 text-sm rounded-r-md",onClick:U},{default:S(()=>[$("Shorten")]),_:1})])]),m.value?(d(),i("div",O,[c("p",Y,b(m.value),1)])):L("v-if",!0)]))}},Q=p(J,[["__scopeId","data-v-3fdb79c3"]]),W={class:"p-5 pt-12 bg-gradient-to-br from-background-950 from-20% via-background-800 to-background-600 min-h-[--adjusted-height]"},X={class:"pt-8 mx-auto"},Z={class:"flex flex-wrap justify-center gap-6"},ee=["v-if"],te={__name:"authHome",setup(a){const l=[{id:1,name:Q,active:!0},{id:2,name:n,active:!0},{id:3,name:n,active:!0},{id:4,name:n,active:!0},{id:5,name:n,active:!0},{id:6,name:n,active:!0},{id:7,name:n,active:!0},{id:8,name:n,active:!0}];return(s,m)=>(d(),i("div",W,[c("div",X,[c("div",Z,[(d(),i(C,null,D(l,o=>c("div",{"v-if":o.active,key:o.id,class:"bg-gray-600 shadow-md rounded-lg"},[(d(),N(F(o.name),{"component-id":o.id},null,8,["component-id"]))],8,ee)),64))])])]))}},Re=p(te,[["__scopeId","data-v-3a3752f4"]]);export{Re as default};
