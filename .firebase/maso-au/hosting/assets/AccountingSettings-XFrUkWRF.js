import{r as g,c as I,m as J,b as p,d as v,J as e,e as i,L as h,E as t,u as s,M as o,N,K as M}from"./@vue-DsGlF1-j.js";import{F as _}from"./vue-sonner-B2EpXGAv.js";import{u as T}from"./vuex--kc_uza-.js";import{f as V,i as y,a as d,d as D,b as c,c as x}from"./index-fh3STtDl.js";import{j as S,k as Y,u as $}from"./@firebase-CBgXa-9_.js";import{_ as Z}from"./AccountingSidebar-pKQpwrKS.js";import{c as A,_ as R,a as w,b as P}from"./CardContent-tDbV450H.js";import{_ as q}from"./Textarea-DOtnrcQZ.js";import{d as K,_ as z,a as H,b as O,c as f}from"./SelectScrollDownButton-BK2d6S2D.js";import{_ as Q,a as k,b as B,c as W}from"./TabsContent-C053e7-p.js";import"./radix-vue-6Z8x3TUN.js";import"./@internationalized-D5LszBdy.js";import"./@swc-BOtJyCjG.js";import"./@floating-ui-B6PpBHZy.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vue-router-CrvMPvpV.js";import"./firebase-BQhzl84B.js";import"./@heroicons-DH5_RU0z.js";import"./@unovis-B16_51NZ.js";import"./@emotion-Dz_S_Xyw.js";import"./stylis-YPZU7XtI.js";import"./d3-transition-fhQpLGwb.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-DY0Cqdkz.js";import"./d3-color-Ceo1QMNe.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-Ox4sgw_u.js";import"./d3-interpolate-path-CTc7ZuM7.js";import"./striptags-CDKagow6.js";import"./@vueup-qMjKR5Ws.js";import"./quill-delta-COPIFlMW.js";import"./fast-diff-DNDSwfiB.js";import"./lodash.clonedeep-CrPEM4m0.js";import"./lodash.isequal-CemT60YI.js";import"./to-px-DReLD3CO.js";import"./parse-unit-3UrBcP19.js";import"./d3-array-BJvpcdQ_.js";import"./@juggle-C8OzoCMD.js";import"./d3-axis-Cf4shvhW.js";import"./d3-scale-A6k9qkjg.js";import"./internmap-BkD7Hj8s.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-COsUQkot.js";import"./d3-time-B8hJ2rEE.js";import"./d3-shape-D7Hvm6M3.js";import"./d3-path-CimkQT29.js";import"./throttle-debounce-BnOnwhtV.js";import"./embla-carousel-vue-CXHqejTr.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-QtEXB4oT.js";import"./@vueuse-H75eWtDf.js";import"./embla-carousel-autoplay-0OO14Ffu.js";import"./@radix-icons-C7iqcNif.js";import"./vuex-persistedstate-D4njCX8q.js";import"./maska-Cp-LWreF.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";import"./TooltipTrigger-Bqh97bnl.js";const X={class:"bg-gray-100 min-h-screen flex ml-16"},ee={class:"flex-1 p-8"},se=i("h1",{class:"text-3xl font-bold mb-8"},"Accounting Settings",-1),te={key:0,class:"flex justify-center items-center h-64"},ae=i("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"},null,-1),le=[ae],oe={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},ie=i("strong",{class:"font-bold"},"Error!",-1),ne={class:"block sm:inline"},ue={key:2},re={class:"flex items-center space-x-2"},de={class:"grid grid-cols-3 w-full items-center gap-2"},ce={class:"col-span-2"},me={class:"flex justify-between w-full"},fe={class:"flex items-center space-x-2"},pe={class:"pt-4"},ve={class:"flex items-center space-x-4"},ge=["src"],_e={class:"space-y-2"},be={class:"pt-4"},$s={__name:"AccountingSettings",setup(Ne){const U=g(!0),b=g(null),L=T(),E=I(()=>L.state.accountingSettings),u=g({currency:"AUD",gstRegistered:!1,taxRate:10,invoicePrefix:"INV-",startingNumber:"00001",receiveNotifications:!1}),n=g({businessName:"",businessLogo:"",businessAddress:"",businessPhone:"",businessNumber:"",bankDetails:{accountName:"",accountNumber:"",bsbNumber:""}});J(async()=>{try{await G()}catch(r){b.value="Failed to load settings. Please try again later.",console.error("Error fetching settings:",r)}finally{U.value=!1}});const G=async()=>{const r=V.currentUser.uid,a=S(y,`users/${r}/accounting/settings`),l=await Y(a);if(l.exists()){const m=l.data();m.general&&(u.value={...u.value,...m.general}),m.account&&(n.value={...n.value,...m.account})}},F=async()=>{try{const r=V.currentUser.uid,a=S(y,`users/${r}/accounting/settings`);await $(a,{general:u.value}),_.success("General settings saved successfully")}catch(r){console.error("Error saving general settings:",r),_.error("Failed to save general settings")}},j=async()=>{try{const r=V.currentUser.uid,a=S(y,`users/${r}/accounting/settings`);await $(a,{account:n.value}),_.success("Account settings saved successfully")}catch(r){console.error("Error saving account settings:",r),_.error("Failed to save account settings")}},C=r=>{const a=r.target.files[0];if(a){const l=new FileReader;l.onload=m=>{n.value.businessLogo=m.target.result},l.readAsDataURL(a)}};return(r,a)=>(p(),v("div",X,[e(Z,{class:"shadow-2xl"}),i("div",ee,[se,U.value?(p(),v("div",te,le)):b.value?(p(),v("div",oe,[ie,i("span",ne,h(b.value),1)])):(p(),v("div",ue,[e(s(W),{defaultValue:"general",class:"w-full"},{default:t(()=>[e(s(Q),null,{default:t(()=>[e(s(k),{value:"general"},{default:t(()=>[o("General Settings")]),_:1}),e(s(k),{value:"account"},{default:t(()=>[o("Account Settings")]),_:1})]),_:1}),e(s(B),{value:"general"},{default:t(()=>[e(s(A),{class:"bg-white shadow-md"},{default:t(()=>[e(s(R),null,{default:t(()=>[e(s(w),null,{default:t(()=>[o("General Settings")]),_:1})]),_:1}),e(s(P),null,{default:t(()=>[i("form",{onSubmit:N(F,["prevent"]),class:"space-y-4"},[i("div",null,[e(s(d),{for:"currency"},{default:t(()=>[o("Default Currency")]),_:1}),e(s(K),{modelValue:u.value.currency,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value.currency=l)},{default:t(()=>[e(s(z),{id:"currency"},{default:t(()=>[e(s(H),{placeholder:"Select currency"})]),_:1}),e(s(O),null,{default:t(()=>[e(s(f),{value:"AUD"},{default:t(()=>[o("AUD - Australian Dollar")]),_:1}),e(s(f),{value:"NZD"},{default:t(()=>[o("NZD - New Zealand Dollar")]),_:1}),e(s(f),{value:"USD"},{default:t(()=>[o("USD - United States Dollar")]),_:1}),e(s(f),{value:"EUR"},{default:t(()=>[o("EUR - Euro")]),_:1}),e(s(f),{value:"GBP"},{default:t(()=>[o("GBP - British Pound")]),_:1}),e(s(f),{value:"JPY"},{default:t(()=>[o("JPY - Japanese Yen")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i("div",re,[e(s(D),{id:"gstRegistered",modelValue:u.value.gstRegistered,"onUpdate:modelValue":a[1]||(a[1]=l=>u.value.gstRegistered=l)},null,8,["modelValue"]),e(s(d),{for:"gstRegistered"},{default:t(()=>[o("Are you set up for GST?")]),_:1})]),i("div",null,[e(s(d),{for:"taxRate"},{default:t(()=>[o("Default GST Rate (%)")]),_:1}),e(s(c),{disabled:!u.value.gstRegistered,type:"number",id:"taxRate",modelValue:u.value.taxRate,"onUpdate:modelValue":a[2]||(a[2]=l=>u.value.taxRate=l),min:"0",max:"100",step:"0.1"},null,8,["disabled","modelValue"])]),i("div",de,[i("div",null,[e(s(d),{class:"ml-1",for:"invoicePrefix"},{default:t(()=>[o("Invoice Prefix")]),_:1}),e(s(c),{type:"text",id:"invoicePrefix",modelValue:u.value.invoicePrefix,"onUpdate:modelValue":a[3]||(a[3]=l=>u.value.invoicePrefix=l)},null,8,["modelValue"])]),i("div",ce,[i("div",me,[e(s(d),{class:"ml-1",for:"startingNumber"},{default:t(()=>[o("Starting Number")]),_:1}),e(s(d),{class:"ml-1 font-normal text-gray-600 text-sm",for:"startingNumber"},{default:t(()=>[o("Most recent invoice: "+h(u.value.startingNumber),1)]),_:1})]),e(s(c),{type:"number",id:"startingNumber",modelValue:u.value.startingNumber,"onUpdate:modelValue":a[4]||(a[4]=l=>u.value.startingNumber=l)},null,8,["modelValue"])])]),i("div",fe,[e(s(D),{id:"receiveNotifications",modelValue:u.value.receiveNotifications,"onUpdate:modelValue":a[5]||(a[5]=l=>u.value.receiveNotifications=l)},null,8,["modelValue"]),e(s(d),{for:"receiveNotifications"},{default:t(()=>[o("Receive Notifications")]),_:1})]),i("div",pe,[e(s(x),{type:"submit"},{default:t(()=>[o("Save General Settings")]),_:1})])],32)]),_:1})]),_:1})]),_:1}),e(s(B),{value:"account"},{default:t(()=>[e(s(A),{class:"bg-white shadow-md"},{default:t(()=>[e(s(R),null,{default:t(()=>[e(s(w),null,{default:t(()=>[o("Account Settings")]),_:1})]),_:1}),e(s(P),null,{default:t(()=>[i("form",{onSubmit:N(j,["prevent"]),class:"space-y-4"},[i("div",null,[e(s(d),{for:"businessName"},{default:t(()=>[o("Business Name")]),_:1}),e(s(c),{id:"businessName",modelValue:n.value.businessName,"onUpdate:modelValue":a[6]||(a[6]=l=>n.value.businessName=l),required:""},null,8,["modelValue"])]),i("div",null,[e(s(d),{for:"businessLogo"},{default:t(()=>[o("Business Logo")]),_:1}),i("div",ve,[e(s(c),{id:"businessLogo",type:"file",onChange:C,accept:"image/*"}),n.value.businessLogo?(p(),v("img",{key:0,src:n.value.businessLogo,alt:"Business Logo",class:"h-16 w-16 object-contain"},null,8,ge)):M("v-if",!0)])]),i("div",null,[e(s(d),{for:"businessAddress"},{default:t(()=>[o("Business Address")]),_:1}),e(s(q),{id:"businessAddress",modelValue:n.value.businessAddress,"onUpdate:modelValue":a[7]||(a[7]=l=>n.value.businessAddress=l)},null,8,["modelValue"])]),i("div",null,[e(s(d),{for:"businessPhone"},{default:t(()=>[o("Business Phone Number")]),_:1}),e(s(c),{id:"businessPhone",modelValue:n.value.businessPhone,"onUpdate:modelValue":a[8]||(a[8]=l=>n.value.businessPhone=l),type:"tel"},null,8,["modelValue"])]),i("div",null,[e(s(d),{for:"businessNumber"},{default:t(()=>[o("ABN/Business Number")]),_:1}),e(s(c),{id:"businessNumber",modelValue:n.value.businessNumber,"onUpdate:modelValue":a[9]||(a[9]=l=>n.value.businessNumber=l)},null,8,["modelValue"])]),i("div",null,[e(s(d),null,{default:t(()=>[o("Business Bank Details")]),_:1}),i("div",_e,[e(s(c),{modelValue:n.value.bankDetails.accountName,"onUpdate:modelValue":a[10]||(a[10]=l=>n.value.bankDetails.accountName=l),placeholder:"Account Name"},null,8,["modelValue"]),e(s(c),{modelValue:n.value.bankDetails.accountNumber,"onUpdate:modelValue":a[11]||(a[11]=l=>n.value.bankDetails.accountNumber=l),placeholder:"Account Number"},null,8,["modelValue"]),e(s(c),{modelValue:n.value.bankDetails.bsbNumber,"onUpdate:modelValue":a[12]||(a[12]=l=>n.value.bankDetails.bsbNumber=l),placeholder:"BSB Number"},null,8,["modelValue"])])]),e(s(x),{onClick:a[13]||(a[13]=N(l=>console.log("accountingSettings: ",E.value),["prevent"]))},{default:t(()=>[o("Log store details")]),_:1}),i("div",be,[e(s(x),{type:"submit"},{default:t(()=>[o("Save Account Settings")]),_:1})])],32)]),_:1})]),_:1})]),_:1})]),_:1})]))])]))}};export{$s as default};
