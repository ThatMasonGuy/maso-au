import{i as et,c as y}from"./@emotion-Dz_S_Xyw.js";import{i as _e}from"./d3-transition-fhQpLGwb.js";import{i as si}from"./d3-interpolate-path-CTc7ZuM7.js";import{s as oi}from"./striptags-PW3Qp06w.js";import"./to-px-DReLD3CO.js";import{m as oe,a as ae,b as ai,e as ri,c as li,s as ci}from"./d3-array-BJvpcdQ_.js";import{c as at,f as re,h as di,i as U,t as ke,r as B,j as Se,w as L,k as Ce,l as st,m as it,n as j,p as X,b as G,d as q,q as we,v as vt,x as rt}from"./@vue-Cc5W6W03.js";import{R as hi}from"./@juggle-C8OzoCMD.js";import{s as E,p as Ot}from"./d3-selection-DSeOx27A.js";import{a as le,b as ce,c as de,d as he}from"./d3-axis-Cf4shvhW.js";import{l as ue}from"./d3-ease-Ox4sgw_u.js";import{l as ui,p as fi,s as gi,a as pi,b as vi,i as mi,t as yi,u as xi,c as bi,d as _i,q as ki,e as Si,f as Ci,o as wi,g as Ai,h as Ti}from"./d3-scale-A6k9qkjg.js";import{c as $i,a as Di,b as Ri,d as Fi,e as Oi,f as Ei,g as Li,h as zi,i as Mi,j as Bi,k as Ii,l as Pi,m as Wi,n as Ni,o as Hi,p as Vi,s as Yi,q as Xi,r as Ui,t as ji,u as Gi,v as qi,w as Zi,x as Ki,y as Qi,z as Ji,S as tn,A as en,B as nn}from"./d3-shape-D7Hvm6M3.js";import{i as sn}from"./d3-interpolate-DY0Cqdkz.js";import{t as on}from"./throttle-debounce-BnOnwhtV.js";import{h as Ae}from"./d3-color-Ceo1QMNe.js";const an="modulepreload",rn=function(i){return"/"+i},fe={},Ms=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(e.map(r=>{if(r=rn(r),r in fe)return;fe[r]=!0;const l=r.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":an,l||(u.as="script",u.crossOrigin=""),u.href=r,a&&u.setAttribute("nonce",a),document.head.appendChild(u),l)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})}))}return s.then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};var ft;(function(i){i[i.SVG=0]="SVG",i[i.HTML=1]="HTML"})(ft||(ft={}));var N;(function(i){i.Fit="fit",i.Extend="extend",i.FitWidth="fit_width"})(N||(N={}));const H=i=>typeof i=="number",Xt=i=>typeof i=="function",mt=i=>Array.isArray(i),ln=i=>i instanceof Object,kt=i=>i.constructor.name!=="Function"&&i.constructor.name!=="Object",ge=i=>ln(i)&&!mt(i)&&!Xt(i)&&!kt(i),gt=(i,t,e=new Set)=>{if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;if(e.has(i))return!0;e.add(i);for(let n=0;n<i.length;n++)if(!gt(i[n],t[n],e))return!1;return!0}if(i instanceof Date&&t instanceof Date)return i.getTime()===t.getTime();if(typeof i=="object"&&i!==null&&t!==null){if(typeof t!="object")return!1;if(i===t)return!0;if(Object.keys(i).length!==Object.keys(t).length)return!1;if(e.has(i))return!0;e.add(i);for(const s in i)if(!gt(i[s],t[s],e))return!1;return!0}return i===t},Et=i=>i.flat(),St=(i,t=new Map)=>{if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){const e=[];t.set(i,e);for(const n of i)e.push(t.has(n)?t.get(n):St(n,t));return e}if(kt(i))return i;if(i instanceof Object){const e={};t.set(i,e);const n=i;return Object.keys(i).reduce((s,o)=>(s[o]=t.has(n[o])?t.get(n[o]):St(n[o],t),s),e),e}return i},tt=(i,t,e=new Map)=>{if(!i||!t||i===t)return i;const n=kt(i)?i:St(i);return e.has(t)?e.get(t):(e.set(t,n),Object.keys(t).forEach(s=>{s==="__proto__"||s==="constructor"||(ge(i[s])&&ge(t[s])?n[s]=tt(i[s],t[s],e):kt(t)?n[s]=t:n[s]=St(t[s]))}),n)},Bs=(i,t)=>(i=Object.assign({},i),t.forEach(e=>delete i[e]),i),Ct=(i,t,e)=>on(t,i);function Ut(i,t,e){return Xt(t)?t(i,e):t}function jt(i,t,e){return Ut(i,t,e)}function $(i,t,e){return Ut(i,t,e)}function dt(i){return i.filter(t=>t&&!H(t))}function P(i,t,e){return Math.min(Math.max(i,t),e)}function cn(i,t,...e){const n=[];let s=0,o=0;for(const a of e){const r=$(i,a,t)||0;r>=0?n.push(s+=r):n.push(o+=r)}return n}function dn(i,...t){return i?oe(i,(n,s)=>oe(t,o=>$(n,o,s))):void 0}function hn(i,...t){return i?ae(i,(n,s)=>ae(t,o=>$(n,o,s))):void 0}function Rt(i,...t){return[dn(i,...t),hn(i,...t)]}function un(i,t,e){if(i.length<=1)return i[0];const n=i.map((a,r)=>$(a,e,r));n.sort((a,r)=>a-r);const s=ai(a=>a).left,o=s(n,t,1,i.length-1);return t-n[o-1]>n[o]-t?i[o]:i[o-1]}function fn(i,t,e){return i.filter((s,o)=>{const a=$(s,e,o);return a>=t[0]&&a<=t[1]})}const gn=globalThis.ResizeObserver||hi,Gt={duration:void 0,margin:{top:0,bottom:0,left:0,right:0},padding:{top:0,bottom:0,left:0,right:0},sizing:N.Fit,width:void 0,height:void 0,svgDefs:void 0,ariaLabel:void 0};class ot{constructor(t){this._defaultConfig=Gt,this._isFirstRender=!0,this._requestedAnimationFrame=null,this._container=t;const e=E(this._container);e.attr("role","figure"),this.svg=e.append("svg").style("display","block").attr("xmlns","http://www.w3.org/2000/svg").attr("height",ot.DEFAULT_CONTAINER_HEIGHT).attr("aria-hidden",!0),this._svgDefs=this.svg.append("defs"),this._svgDefsExternal=this.svg.append("defs"),this.element=this.svg.node()}updateContainer(t){this.prevConfig=this.config,this.config=tt(this._defaultConfig,t)}_preRender(){}_render(t){const{config:e,prevConfig:n}=this;e.svgDefs!==n.svgDefs&&(this._svgDefsExternal.selectAll("*").remove(),this._svgDefsExternal.html(e.svgDefs)),E(this._container).attr("aria-label",e.ariaLabel),this._isFirstRender=!1}render(t=this.config.duration){const e=this.config.width||this.containerWidth,n=this.config.height||this.containerHeight;this.svg.attr("width",e).attr("height",n),this._resizeObserver||this._setUpResizeObserver(),cancelAnimationFrame(this._requestedAnimationFrame),this._requestedAnimationFrame=requestAnimationFrame(()=>{this._preRender(),this._render(t)})}get containerWidth(){return this.config.width?this.element.clientWidth:this._container.clientWidth||this._container.getBoundingClientRect().width}get containerHeight(){return this.config.height?this.element.clientHeight:this._container.clientHeight||this._container.getBoundingClientRect().height||ot.DEFAULT_CONTAINER_HEIGHT}get width(){return P(this.containerWidth-this.config.margin.left-this.config.margin.right,0,Number.POSITIVE_INFINITY)}get height(){return P(this.containerHeight-this.config.margin.top-this.config.margin.bottom,0,Number.POSITIVE_INFINITY)}_removeAllChildren(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}_onResize(){const{config:t}=this;(t.sizing===N.Fit||t.sizing===N.FitWidth)&&this.render(0)}_setUpResizeObserver(){if(this._resizeObserver)return;const t=this._container.getBoundingClientRect();this._containerSize={width:t.width,height:t.height},this._resizeObserver=new gn((e,n)=>{const s=this._container.getBoundingClientRect(),o={width:s.width,height:s.height};!gt(this._containerSize,o)&&o.width&&o.height&&(this._containerSize=o,this._onResize())}),this._resizeObserver.observe(this._container)}destroy(){var t;cancelAnimationFrame(this._requestedAnimationFrame),(t=this._resizeObserver)===null||t===void 0||t.disconnect(),this.svg.remove()}}ot.DEFAULT_CONTAINER_HEIGHT=300;function Te(){const i=()=>Math.floor((1+crypto.getRandomValues(new Uint32Array(1))[0])*65536).toString(16).substring(1);return`${i()+i()}-${i()}-${i()}-${i()}-${i()}${i()}${i()}`}function pn(i,t){const e=i.substr(4,i.length-5);return getComputedStyle(t).getPropertyValue(e)}const ht=(globalThis==null?void 0:globalThis.UNOVIS_COLORS)||["#4D8CFD","#FF6B7E","#F4B83E","#A6CC74","#00C19A","#6859BE"],vn=(globalThis==null?void 0:globalThis.UNOVIS_COLORS_DARK)||["#4D8CFD","#FF6B7E","#FFC16D","#A6CC74","#00C19A","#7887E0"],V=i=>`--vis-${H(i)?`color${i%ht.length}`:i}`;function mn(i,t=.4){const e=Ae(i);return e.l=e.l*(1+t),e.formatHex()}function yn(i,t=.4,e=.6){const n=Ae(i);return n.s=n.s*(1-e),n.l=n.l*(1-t),n.formatHex()}const pt=10,Lt=[{id:"stripes-diagonal",svg:'<path d="M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2" stroke="#000"/>'},{id:"dots",svg:'<path d="m0-1.5a1 1 0 010 3m10-3a1 1 0 000 3M5 3.5a1 1 0 010 3 1 1 0 010-3M0 8.5 a1 1 0 010 3m10-3a1 1 0 000 3" fill"#000"/>'},{id:"stripes-vertical",svg:'<path d="M 5,-1 L5,11" stroke="#000"/>'},{id:"crosshatch",svg:'<path d="M0 0L10 10ZM10 0L0 10Z" stroke="#000"/>'},{id:"waves",svg:'<path d="M0 4Q2.5 1 5 4 7.5 7 10 4v2Q7.5 9 5 6 2.5 3 0 6Z" fill="#000"/>'},{id:"circles",svg:'<circle cx="5" cy="5" r="3" stroke="#000" fill="#fff"/>'}],zt=[{id:"circle",marker:'<circle cx="5" cy="5" r="5"/>',dashArray:[]},{id:"triangle",marker:'<path d="M5,0 L10,9 L0,9Z">',dashArray:[9,1]},{id:"diamond",marker:'<path d="M 0 5 L5 0 L 10 5 L 5 10 L 0 5Z">',dashArray:[2]},{id:"arrow",marker:'<path d="M4 0 0 0 6 5 0 10 4 10 10 5Z">',dashArray:[2,3,8,3]},{id:"square",marker:'<rect x="1" y="1" width="8" height="8"/>',dashArray:[6]},{id:"star",marker:'<path d="m2 9 3-9 3 9L0 3h10Z"/>',dashArray:[1,6]}];function Y(i){return`vis-${`pattern-${i.svg?"fill":"marker"}`}-${i.id}`}const xn=i=>`<mask id="${Y(i)}">
    <pattern id="${i.id}" viewBox="0 0 10 10" width="${pt}" height="${pt}" patternUnits="userSpaceOnUse">
      <rect width="100%" height="100%" fill="#fff"/>
      ${i.svg}
    </pattern>
    <rect x="-50%" y="-50%" width="200%" height="200%" fill="url(#${i.id})"/>
  </mask>`,bn=(i,t)=>`<marker id="${Y(i)}"
    fill="var(${V(t)})"
    markerUnits="userSpaceOnUse"
    refX="5"
    refY="5"
    markerWidth="${pt}"
    markerHeight="${pt}">
    ${i.marker}
  </marker>`;function _n(){const i=Lt.map(xn).concat(zt.map(bn)).join(""),t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.style.position="fixed",t.style.zIndex="-99999999",t.innerHTML=`<defs>${i}</defs>`,document.body.appendChild(t)}typeof window<"u"&&_n();const $e=(globalThis==null?void 0:globalThis.UNOVIS_FONT_W2H_RATIO_DEFAULT)||.5,De=(globalThis==null?void 0:globalThis.UNOVIS_TEXT_SEPARATOR_DEFAULT)||[" ","-",".",","],Re=(globalThis==null?void 0:globalThis.UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT)||"-",pe=(globalThis==null?void 0:globalThis.UNOVIS_TEXT_DEFAULT)||{text:"",fontSize:12,fontFamily:"var(--vis-font-family)",lineHeight:1.25,marginTop:0,marginBottom:0};et`
  :root {
    label: vis-root-styles;
    --vis-font-family: Inter, Arial, "Helvetica Neue", Helvetica, sans-serif;
    --vis-font-wh-ratio: ${$e};
    --vis-color-main: var(${V(0)});
    --vis-color-main-light: ${mn(ht[0])};
    --vis-color-main-dark: ${yn(ht[0])};
    --vis-color-grey: #2a2a2a;
    ${ht.map((i,t)=>`${V(t)}: ${i};`)}
    ${vn.map((i,t)=>`--vis-dark-color${t}: ${i};`)}
    ${Lt.map((i,t)=>`
      --${Y(i)}: url(#${Y(i)});
      --vis-pattern-fill${t}: var(--${Y(i)});
    `)}
    ${zt.map((i,t)=>{var e;return`
      --${Y(i)}: url(#${Y(i)});
      --vis-pattern-marker${t}: var(--${Y(i)});
      --vis-pattern-dasharray${t}: ${(e=i.dashArray)===null||e===void 0?void 0:e.join(" ")};
    `})}

    body.theme-dark {
      ${ht.map((i,t)=>`${V(t)}: var(--vis-dark-color${t});`)}
    }

    body.theme-patterns {
      ${Lt.map((i,t)=>`path[style*="fill: var(${V(t)})"]  {
        mask: var(--vis-pattern-fill${t});
      }`)}
      ${zt.map((i,t)=>`
      path[stroke="var(${V(t)})"]:not([style*="fill"]),
      path[style*="stroke: var(${V(t)})"]:not([style*="fill"]) {
        marker: var(--vis-pattern-marker${t});
        stroke-dasharray: var(--vis-pattern-dasharray${t});
      }
    `)}
}
`;function kn(i=window==null?void 0:window.document.body){return i?+pn("var(--vis-font-wh-ratio)",i):$e}function O(i,t,e){if(i.nodes().forEach(n=>_e(n)),t){const n=i.transition().duration(t);return e&&n.ease(e),n}else return i}const Sn=Object.assign(Object.assign({},Gt),{tooltip:void 0,annotations:void 0});class Cn extends ot{constructor(t,e,n){var s;super(t),this._defaultConfig=Sn,this.config=this._defaultConfig,e&&(this.updateContainer(e,!0),this.component=e.component),n&&this.setData(n,!0),!((s=this.component)===null||s===void 0)&&s.datamodel.data&&this.render()}setData(t,e){var n;const{config:s}=this;this.component&&this.component.setData(t),e||this.render(),(n=s.tooltip)===null||n===void 0||n.hide()}updateContainer(t,e){super.updateContainer(t),this._removeAllChildren(),this.component=t.component,t.sizing&&(this.component.sizing=t.sizing),this.element.appendChild(this.component.element);const n=t.tooltip;n&&(n.hasContainer()||n.setContainer(this._container),n.setComponents([this.component]));const s=t.annotations;s&&this.element.appendChild(s.element),this.element.appendChild(this._svgDefs.node()),this.element.appendChild(this._svgDefsExternal.node()),e||this.render()}updateComponent(t,e){this.component.setConfig(t),e||this.render()}update(t,e,n){t&&this.updateContainer(t,!0),e&&this.updateComponent(e,!0),n&&this.setData(n,!0),this.render()}getFitWidthScale(){const{config:t,component:e}=this,n=e;if(!n.getWidth)return 1;const s=n.getWidth()+t.margin.left+t.margin.right;return this.width/s}_preRender(){var t;super._preRender(),this.component.setSize(this.width,this.height,this.containerWidth,this.containerHeight),(t=this.config.annotations)===null||t===void 0||t.setSize(this.width,this.height,this.containerWidth,this.containerHeight)}_render(t){var e;const{config:n,component:s}=this;super._render(t),s.g.attr("transform",`translate(${n.margin.left},${n.margin.top})`),s.render(t),(e=n.annotations)===null||e===void 0||e.render(t),n.tooltip&&n.tooltip.update()}render(t=this.config.duration){const{config:e,component:n}=this;if(e.sizing===N.Extend||e.sizing===N.FitWidth){const s=e.sizing===N.FitWidth,o=n,a=o.getWidth()+e.margin.left+e.margin.right,r=o.getHeight()+e.margin.top+e.margin.bottom,l=s?this.getFitWidthScale():1,c=this.svg.attr("width"),u=this.svg.attr("height"),d=a*l,h=r*l,g=c||u;O(this.svg,g?t:0).attr("width",d).attr("height",h).attr("viewBox",`0 0 ${a} ${s?h:r}`).attr("preserveAspectRatio","xMinYMin")}else this.svg.attr("width",this.config.width||this.containerWidth).attr("height",this.config.height||this.containerHeight);this._resizeObserver||this._setUpResizeObserver(),cancelAnimationFrame(this._requestedAnimationFrame),this._requestedAnimationFrame=requestAnimationFrame(()=>{this._preRender(),this._render(t)})}_onResize(){var t;const{config:e}=this;super._onResize(),(t=e.tooltip)===null||t===void 0||t.hide()}destroy(){var t,e;const{component:n,config:s}=this;super.destroy(),n==null||n.destroy(),(t=s.tooltip)===null||t===void 0||t.destroy(),(e=s.annotations)===null||e===void 0||e.destroy()}}class qt{constructor(t){this.data=t}get data(){return this._data}set data(t){this._data=t}}var _;(function(i){i.X="x",i.Y="y"})(_||(_={}));const ve={scaleLinear:ui,scalePow:fi,scaleSqrt:gi,scaleLog:pi,scaleSymlog:vi,scaleIdentity:mi,scaleTime:yi,scaleUtc:xi,scaleSequential:bi,scaleDiverging:_i,scaleQuantize:ki,scaleQuantile:Si,scaleThreshold:Ci,scaleOrdinal:wi,scaleBand:Ai,scalePoint:Ti};var w;(function(i){i.X="x",i.Y="y"})(w||(w={}));var K;(function(i){i.West="west",i.East="east",i.North="north",i.South="south"})(K||(K={}));const wn=Object.assign(Object.assign({},Gt),{components:[],tooltip:void 0,crosshair:void 0,annotations:void 0,xAxis:void 0,yAxis:void 0,autoMargin:!0,xScale:void 0,xDomain:void 0,xDomainMinConstraint:void 0,xDomainMaxConstraint:void 0,xRange:void 0,yScale:void 0,yDomain:void 0,yDomainMinConstraint:void 0,yDomainMaxConstraint:void 0,yRange:void 0,yDirection:K.North,preventEmptyDomain:null,scaleByDomain:!1});class An extends ot{constructor(t,e,n){var s,o;super(t),this._defaultConfig=wn,this.datamodel=new qt,this.config=this._defaultConfig,this._clipPathId=Te(),this._axisMargin={top:0,bottom:0,left:0,right:0},this._firstRender=!0,this._clipPath=this.svg.append("clipPath").attr("id",this._clipPathId),this._clipPath.append("rect");const a="saturate",r=window.location.href.replace(window.location.hash,"");this.svg.attr("class",y`
      --highlight-filter-id: url(${r}#${a}); // defining a css variable
    `),this._svgDefs.append("filter").attr("id",a).attr("filterUnits","objectBoundingBox").html('<feColorMatrix type="saturate" in="SourceGraphic" values="1.35"/>'),e&&this.updateContainer(e,!0),n&&this.setData(n,!0),(this.config.xAxis||this.config.yAxis||!((s=this.components)===null||s===void 0)&&s.some(l=>l.datamodel.data))&&this.render(),(o=document.fonts)===null||o===void 0||o.ready.then(()=>{this._firstRender||this._renderAxes(0)})}get components(){return this.config.components}get width(){const t=this._getMargin();return P(this.containerWidth-t.left-t.right,0,Number.POSITIVE_INFINITY)}get height(){const t=this._getMargin();return P(this.containerHeight-t.top-t.bottom,0,Number.POSITIVE_INFINITY)}setData(t,e){var n,s,o,a;const{components:r,config:l}=this;t&&(this.datamodel.data=t,r.forEach(c=>{c.setData(t)}),(n=l.crosshair)===null||n===void 0||n.setData(t),(s=l.xAxis)===null||s===void 0||s.setData(t),(o=l.yAxis)===null||o===void 0||o.setData(t),(a=l.tooltip)===null||a===void 0||a.hide(),e||this.render())}updateContainer(t,e){super.updateContainer(t),this._removeAllChildren(),this.setData(this.datamodel.data,!0),t.xAxis&&(this.config.xAxis.config.type=_.X,this.element.appendChild(t.xAxis.element)),t.yAxis&&(this.config.yAxis.config.type=_.Y,this.element.appendChild(t.yAxis.element));for(const a of this.components)this.element.appendChild(a.element);const n=t.tooltip;n&&(n.hasContainer()||n.setContainer(this._container),n.setComponents(this.components));const s=t.crosshair;s&&(s.setContainer(this.svg),s.tooltip=n,this.element.appendChild(s.element));const o=t.annotations;o&&this.element.appendChild(o.element),this.element.appendChild(this._clipPath.node()),this.element.appendChild(this._svgDefs.node()),this.element.appendChild(this._svgDefsExternal.node()),e||this.render()}updateComponents(t,e){const{config:n}=this;this.components.forEach((s,o)=>{t[o]&&s.setConfig(t[o])}),this._updateScales(...this.components,n.xAxis,n.yAxis,n.crosshair),e||this.render()}update(t,e,n){n&&(this.datamodel.data=n),t&&this.updateContainer(t,!0),e&&this.updateComponents(e,!0),this.render()}_preRender(){const{config:t}=this;super._preRender(),t.autoMargin&&this._setAutoMargin();const e=dt([...this.components,t.xAxis,t.yAxis,t.crosshair,t.annotations]);for(const n of e)n.setSize(this.width,this.height,this.containerWidth,this.containerHeight);this._updateScales(...this.components,t.xAxis,t.yAxis,t.crosshair)}_render(t){var e,n,s,o,a;const{config:r}=this;super._render();const l=this._getMargin();for(const d of this.components)d.g.attr("transform",`translate(${l.left},${l.top})`).style("clip-path",d.clippable?`url(#${this._clipPathId})`:null).style("-webkit-clip-path",d.clippable?`url(#${this._clipPathId})`:null),d.render(t);this._renderAxes(this._firstRender?0:t);const c=2;this._clipPath.select("rect").attr("x",-c).attr("y",-c).attr("width",this.width+2*c).attr("height",this.height+2*c),(e=r.tooltip)===null||e===void 0||e.update();const u=r.crosshair;if(u){const d=this.components.filter(p=>!p.stacked).map(p=>p.config.y),h=this.components.filter(p=>p.stacked).map(p=>p.config.y),g=(n=this.components.find(p=>p.config.baseline))===null||n===void 0?void 0:n.config,v=g==null?void 0:g.baseline;u.accessors={x:(s=this.components[0])===null||s===void 0?void 0:s.config.x,y:Et(d),yStacked:Et(h),baseline:v},u.g.attr("transform",`translate(${l.left},${l.top})`).style("clip-path",`url(#${this._clipPathId})`).style("-webkit-clip-path",`url(#${this._clipPathId})`),u.hide()}(o=r.annotations)===null||o===void 0||o.g.attr("transform",`translate(${l.left},${l.top})`),(a=r.annotations)===null||a===void 0||a.render(),this._firstRender=!1}_updateScales(...t){const e=dt(t||this.components);this._setScales(...e),this._updateScalesDomain(...e),this._updateScalesRange(...e)}_setScales(...t){const{config:e}=this;t&&(e.xScale&&t.forEach(n=>n.setScale(w.X,e.xScale)),e.yScale&&t.forEach(n=>n.setScale(w.Y,e.yScale)))}_updateScalesDomain(...t){const{config:e}=this;if(!t)return;const n=t.filter(s=>!s.config.excludeFromDomainCalculation);Object.values(w).forEach(s=>{var o,a,r,l,c,u,d,h;const[g,v]=ri(li(n.map(k=>k.getDataExtent(s,e.scaleByDomain)))),p=s===w.Y?e.yDomain:e.xDomain,f=s===w.Y?e.yDomainMinConstraint:e.xDomainMinConstraint,b=s===w.Y?e.yDomainMaxConstraint:e.xDomainMaxConstraint,S=(a=(o=p==null?void 0:p[0])!==null&&o!==void 0?o:g)!==null&&a!==void 0?a:0,D=(l=(r=p==null?void 0:p[1])!==null&&r!==void 0?r:v)!==null&&l!==void 0?l:1,A=[P(S,(c=f==null?void 0:f[0])!==null&&c!==void 0?c:Number.NEGATIVE_INFINITY,(u=f==null?void 0:f[1])!==null&&u!==void 0?u:Number.POSITIVE_INFINITY),P(D,(d=b==null?void 0:b[0])!==null&&d!==void 0?d:Number.NEGATIVE_INFINITY,(h=b==null?void 0:b[1])!==null&&h!==void 0?h:Number.POSITIVE_INFINITY)];if(A[0]===A[1]){const k=n.some(T=>{var R;return((R=T.datamodel.data)===null||R===void 0?void 0:R.length)>0});(e.preventEmptyDomain||e.preventEmptyDomain===null&&(!k||s===w.Y))&&(A[1]=A[0]+1)}t.forEach(k=>k.setScaleDomain(s,A))})}_updateScalesRange(...t){var e,n,s,o,a,r;const{config:l}=this;if(!t)return;const c=l.yDirection===K.South,u=[(e=l.padding.left)!==null&&e!==void 0?e:0,(n=this.width-l.padding.right)!==null&&n!==void 0?n:0],d=[(s=this.height-l.padding.bottom)!==null&&s!==void 0?s:0,(o=l.padding.top)!==null&&o!==void 0?o:0];c&&d.reverse();for(const g of t)g.setScaleRange(w.X,(a=l.xRange)!==null&&a!==void 0?a:u),g.setScaleRange(w.Y,(r=l.yRange)!==null&&r!==void 0?r:d);const h=t.map(g=>g.bleed).reduce((g,v)=>{for(const p of Object.keys(g)){const f=p;g[f]<v[f]&&(g[f]=v[f])}return g},{top:0,bottom:0,left:0,right:0});for(const g of t)g.setScaleRange(w.X,[u[0]+h.left,u[1]-h.right]),g.setScaleRange(w.Y,c?[d[0]+h.top,d[1]-h.bottom]:[d[0]-h.bottom,d[1]+h.top])}_renderAxes(t){const{config:{xAxis:e,yAxis:n}}=this,s=this._getMargin();dt([e,n]).forEach(a=>{const r=a.getOffset(s);a.g.attr("transform",`translate(${r.left},${r.top})`),a.render(t)})}_setAutoMargin(){const{config:{xAxis:t,yAxis:e}}=this,n=dt([...this.components,t,e]);this._updateScalesDomain(...n);const s=this._firstRender?2:1;for(let o=0;o<s;o+=1){const a={top:0,bottom:0,left:0,right:0};this._updateScalesRange(...n),dt([t,e]).forEach(l=>{l.preRender();const c=l.getRequiredMargin();a.top<c.top&&(a.top=c.top),a.bottom<c.bottom&&(a.bottom=c.bottom),a.left<c.left&&(a.left=c.left),a.right<c.right&&(a.right=c.right)}),this._axisMargin=a}}_getMargin(){const{config:{margin:t}}=this;return{top:t.top+this._axisMargin.top,bottom:t.bottom+this._axisMargin.bottom,left:t.left+this._axisMargin.left,right:t.right+this._axisMargin.right}}destroy(){const{components:t,config:{tooltip:e,crosshair:n,annotations:s,xAxis:o,yAxis:a}}=this;super.destroy();for(const r of t)r==null||r.destroy();e==null||e.destroy(),n==null||n.destroy(),s==null||s.destroy(),o==null||o.destroy(),a==null||a.destroy()}}const Zt={duration:600,events:{},attributes:{}};class Fe{constructor(t=ft.SVG){var e,n;this.type=ft.SVG,this.datamodel=new qt,this.sizing=N.Fit,this.events={},this._defaultConfig=Zt,this._width=400,this._height=200,this._containerWidth=void 0,this._containerHeight=void 0,this._setUpComponentEventsThrottled=Ct(this._setUpComponentEvents,500),this._setCustomAttributesThrottled=Ct(this._setCustomAttributes,500),t===ft.SVG?this.element=document.createElementNS("http://www.w3.org/2000/svg","g"):this.element=document.createElement("div"),this.uid=Te(),this.g=E(this.element);const s=(n=(e=this.constructor)===null||e===void 0?void 0:e.selectors)===null||n===void 0?void 0:n.root;s&&this.g.attr("class",s)}setConfig(t){this.prevConfig=this.config,this.config=tt(this._defaultConfig,t)}setData(t){this.datamodel.data=t}setSize(t,e,n,s){isFinite(t)&&(this._width=t),isFinite(e)&&(this._height=e),isFinite(n)&&(this._containerWidth=n),isFinite(s)&&(this._containerHeight=s)}render(t=this.config.duration){this._render(t);const e="animating";t&&(this.g.attr(e,""),this.g.transition(e).duration(t).on("end interrupt",()=>{this.g.attr(e,null)})),this._setUpComponentEventsThrottled(),this._setCustomAttributesThrottled()}get bleed(){return{top:0,bottom:0,left:0,right:0}}_render(t=this.config.duration){}_setCustomAttributes(){const t=this.config.attributes;Object.keys(t).forEach(e=>{Object.keys(t[e]).forEach(n=>{this.g.selectAll(`.${e}`).attr(n,t[e][n])})})}_setUpComponentEvents(){this._bindEvents(this.events),this._bindEvents(this.config.events,".user")}_bindEvents(t=this.events,e=""){Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(s=>{const o=this.g.selectAll(`.${n}`);o.on(s+e,(a,r)=>{const l=o.nodes(),c=l.indexOf(a.currentTarget),u=t[n][s];return u==null?void 0:u(r,a,c,l)})})})}destroy(){var t;(t=this.g)===null||t===void 0||t.remove(),this.element=void 0}isDestroyed(){return!this.element}}class Oe extends qt{constructor(t){super(t)}get data(){var t;return(t=this._data)!==null&&t!==void 0?t:[]}set data(t){Array.isArray(t)&&(this._data=t)}}const Tt=Object.assign(Object.assign({},Zt),{x:void 0,y:void 0,id:(i,t)=>{var e;return(e=i.id)!==null&&e!==void 0?e:`${t}`},color:i=>i.color,xScale:void 0,yScale:void 0,excludeFromDomainCalculation:!1});class Kt extends Fe{constructor(){super(...arguments),this.datamodel=new Oe,this.clippable=!0,this.stacked=!1,this._defaultConfig=Tt,this._xScale=ve.scaleLinear(),this._yScale=ve.scaleLinear()}get xScale(){return this.config.xScale||this._xScale}get yScale(){return this.config.yScale||this._yScale}setConfig(t){var e,n;!((e=this.config)===null||e===void 0)&&e.xScale&&(t.xScale=this.config.xScale),!((n=this.config)===null||n===void 0)&&n.yScale&&(t.yScale=this.config.yScale),super.setConfig(t)}setScaleDomain(t,e){var n,s;t===w.X&&((n=this._xScale)===null||n===void 0||n.domain(e)),t===w.Y&&((s=this._yScale)===null||s===void 0||s.domain(e))}setScaleRange(t,e){var n,s;t===w.X&&((n=this._xScale)===null||n===void 0||n.range(e)),t===w.Y&&((s=this._yScale)===null||s===void 0||s.range(e))}setScale(t,e){e&&t===w.X&&(this._xScale=e),e&&t===w.Y&&(this._yScale=e)}getDataExtent(t,e){const{config:n,datamodel:s}=this;switch(t){case w.X:return this.getXDataExtent();case w.Y:return this.getYDataExtent(e);default:return Rt(s.data,n[t])}}getXDataExtent(){const{config:t,datamodel:e}=this;return Rt(e.data,t.x)}getYDataExtent(t){const{config:e,datamodel:n}=this,s=t?fn(n.data,this.xScale.domain(),e.x):n.data,o=mt(e.y)?e.y:[e.y];return Rt(s,...o)}}var m;(function(i){i.Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i.Center="center",i.Auto="auto"})(m||(m={}));var me;(function(i){i.Absolute="absolute",i.Fixed="fixed"})(me||(me={}));var ye;(function(i){i.Inside="inside",i.Outside="outside"})(ye||(ye={}));var xe;(function(i){i.Horizontal="horizontal",i.Vertical="vertical"})(xe||(xe={}));const Tn={components:[],container:void 0,horizontalPlacement:m.Auto,horizontalShift:0,verticalPlacement:m.Top,verticalShift:0,attributes:{},triggers:{}},Ee=y`
  label: tooltip;
`,$n=et`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${Ee}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,Le=y`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  pointer-events: none;
  opacity: 0;
  transition: opacity;
  transition-duration: 300ms;
  user-select: none;
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  transform: translate(0, -5px);
  color: var(--vis-tooltip-text-color);

  /* object-fit: contain; */
  border-radius: 5px;
  box-shadow: 0 13px 25px 0 var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,ze=y`
  bottom: unset;
  position: fixed;
`,Mt=y`
  opacity: 1;
`,Bt=y`
  display: none;
`,Dn=Object.freeze(Object.defineProperty({__proto__:null,hidden:Bt,positionFixed:ze,root:Ee,show:Mt,tooltip:Le,variables:$n},Symbol.toStringTag,{value:"Module"}));class Me{constructor(t={}){this._defaultConfig=Tn,this.config=this._defaultConfig,this._setUpEventsThrottled=Ct(this._setUpEvents,500),this._setContainerPositionThrottled=Ct(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement("div"),this.div=E(this.element).attr("class",Le),this.setConfig(t),this.components=this.config.components}setConfig(t){var e;this.prevConfig=this.config,this.config=tt(this._defaultConfig,t),this.config.container&&this.config.container!==((e=this.prevConfig)===null||e===void 0?void 0:e.container)&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(t){var e;(e=this.element.parentNode)===null||e===void 0||e.removeChild(this.element),this._container=t,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(t){this.components=t}update(){this._container&&this._setUpEventsThrottled()}show(t,e){t instanceof HTMLElement?this.div.select(":first-child").node()!==t&&this.div.html("").append(()=>t):this.div.html(t),this.div.classed(Bt,!1).classed(Mt,!0),this._isShown=!0,this.place(e)}hide(){this.div.classed(Mt,!1).on("transitionend",()=>{this.div.classed(Bt,!this._isShown)}),this._isShown=!1}place(t){if(!this.hasContainer()){console.warn("Unovis | Tooltip: Container was not set or is not initialized yet");return}const{config:e}=this,n=this.isContainerBody(),s=this.element.offsetWidth,o=this.element.offsetHeight,a=n?window.innerHeight:this._container.scrollHeight,r=n?window.innerWidth:this._container.scrollWidth,l=e.horizontalPlacement===m.Auto?t.x>r/2?m.Left:m.Right:e.horizontalPlacement,c=e.verticalPlacement===m.Auto?t.y>a/2?m.Top:m.Bottom:e.verticalPlacement,u=5,d=l===m.Left?-s-u-e.horizontalShift:l===m.Center?-s/2:u+e.horizontalShift,h=c===m.Bottom?o+u+e.verticalShift:c===m.Center?o/2:-u-e.verticalShift,g=10,v=t.x>r-s-d-g,p=t.x<-d+g,f=v?r-s-d-t.x-g:p?-d-t.x+g:0,b=10,S=t.y>a-h-b,D=t.y<o-h+b,A=S?a-h-t.y-b:D?o-h-t.y+b:0,k=r<s?0:t.x+f+d,T=a<o?o:t.y+A+h;this.div.classed(ze,n).style("top",n?`${T-o}px`:"unset").style("bottom",n?"unset":`${a-T}px`).style("left",`${k}px`)}isContainerBody(){return this._container===document.body}_setContainerPosition(){var t;this._container!==document.body&&((t=getComputedStyle(this._container))===null||t===void 0?void 0:t.position)==="static"&&(this._container.style.position="relative")}_setUpEvents(){const{config:{triggers:t}}=this,e=this.isContainerBody();this.components.forEach(n=>{const s=E(n.element);s.on("mousemove.tooltip",o=>{const[a,r]=e?[o.clientX,o.clientY]:Ot(o,this._container),l=o.composedPath&&o.composedPath()||o.path||[o.target];for(const c of Object.keys(t)){const u=t[c];if(!u)continue;const d=s.selectAll(`.${c}`).nodes();for(const h of l){if(h===s.node())break;if(h.classList.contains(c)){const g=d.indexOf(h),v=E(h).datum(),p=u(v,g,d);p?this.show(p,{x:a,y:r}):this.hide(),o.stopPropagation();return}}}this._isShown&&this.hide()}).on("mouseleave.tooltip",o=>{o.stopPropagation(),this.hide()})})}_setUpAttributes(){const t=this.config.attributes;t&&Object.keys(t).forEach(e=>{this.div.attr(e,t[e])})}destroy(){var t;(t=this.div)===null||t===void 0||t.remove()}}Me.selectors=Dn;function W(i,t,e,n){return Array.isArray(t)&&isFinite(e)?t[e%t.length]:jt(i,t,e)||(H(e)&&!n?`var(${V(e)})`:null)}var C;(function(i){i.Basis="basis",i.BasisClosed="basisClosed",i.BasisOpen="basisOpen",i.Bundle="bundle",i.Cardinal="cardinal",i.CardinalClosed="cardinalClosed",i.CardinalOpen="cardinalOpen",i.CatmullRom="catmullRom",i.CatmullRomClosed="catmullRomClosed",i.CatmullRomOpen="catmullRomOpen",i.Linear="linear",i.LinearClosed="linearClosed",i.MonotoneX="monotoneX",i.MonotoneY="monotoneY",i.Natural="natural",i.Step="step",i.StepAfter="stepAfter",i.StepBefore="stepBefore"})(C||(C={}));const be={[C.Basis]:$i,[C.BasisClosed]:Di,[C.BasisOpen]:Ri,[C.Bundle]:Fi,[C.Cardinal]:Oi,[C.CardinalClosed]:Ei,[C.CardinalOpen]:Li,[C.CatmullRom]:zi,[C.CatmullRomClosed]:Mi,[C.CatmullRomOpen]:Bi,[C.Linear]:Ii,[C.LinearClosed]:Pi,[C.MonotoneX]:Wi,[C.MonotoneY]:Ni,[C.Natural]:Hi,[C.Step]:Vi,[C.StepAfter]:Yi,[C.StepBefore]:Xi},Rn=Object.assign(Object.assign({},Tt),{curveType:C.MonotoneX,lineWidth:2,lineDashArray:void 0,fallbackValue:void 0,highlightOnHover:!1,cursor:null}),Fn=et`
  :root {
    --vis-line-cursor: default;
    --vis-line-stroke-dasharray: none;
    --vis-line-stroke-dashoffset: 0;
  }
`,On=y`
  label: line-component;
`,ut=y`
  label: line;
  transition: opacity 200ms;
  cursor: var(--vis-line-cursor);
`,It=y`
  label: linePath;
  fill: none;
  stroke-dasharray: var(--vis-line-stroke-dasharray);
  stroke-dashoffset: var(--vis-line-stroke-dashoffset);
`,Pt=y`
  label: lineSelectionHelper;
  fill: none;
  stroke: rgba(0, 0, 0, 0);
  stroke-width: 8px;
`,Wt=y`
  opacity: 0.2;
`,En=Object.freeze(Object.defineProperty({__proto__:null,dim:Wt,globalStyles:Fn,line:ut,linePath:It,lineSelectionHelper:Pt,root:On},Symbol.toStringTag,{value:"Module"}));class yt extends Kt{constructor(t){super(),this._defaultConfig=Rn,this.config=this._defaultConfig,this.curve=be[C.MonotoneX],this.events={[yt.selectors.line]:{mouseover:this._highlight.bind(this),mouseleave:this._resetHighlight.bind(this)}},t&&this.setConfig(t)}get bleed(){const{config:{lineWidth:t}}=this,e=this.yScale.domain(),s=(this.yScale.range()[0]>this.yScale.range()[1]?K.North:K.South)===K.South,o=t>3,a=t>=10;return{top:!a&&(!s&&e[1]===0||s&&e[0]===0)?0:t/2,bottom:!a&&(!s&&e[0]===0||s&&e[1]===0)?0:t/2,left:o?t/2:0,right:o?t/2:0}}_render(t){super._render(t);const{config:e,datamodel:{data:n}}=this,s=H(t)?t:e.duration;this.curve=be[e.curveType],this.lineGen=Ui().x(d=>d.x).y(d=>d.y).defined(d=>d.defined).curve(this.curve);const o=mt(e.y)?e.y:[e.y],a=n.map((d,h)=>this.xScale($(d,e.x,h))),r=o.map(d=>{const h=n.map((p,f)=>{const b=$(p,d,f),S=(H(b)||b===null)&&isFinite(b)?b:e.fallbackValue;return{x:a[f],y:this.yScale(S??0),defined:isFinite(S),value:S}}),g=h.reduce((p,f)=>f.defined||p,!1),v=g&&h.some(p=>p.value!==null);return{values:h,defined:g,visible:v}}),l=this.g.selectAll(`.${ut}`).data(r),c=l.enter().append("g").attr("class",ut);c.append("path").attr("class",It).attr("stroke",(d,h)=>W(n,e.color,h)).attr("stroke-opacity",0).attr("stroke-width",e.lineWidth),c.append("path").attr("class",Pt).attr("d",this._emptyPath());const u=c.merge(l);u.style("cursor",(d,h)=>jt(n,e.cursor,h)),u.each((d,h,g)=>{var v;const p=E(g[h]),f=p.select(`.${It}`),b=p.select(`.${Pt}`),S=d.visible,D=Ut(n,e.lineDashArray,h),A=O(f,s).attr("stroke",W(n,e.color,h)).attr("stroke-width",e.lineWidth).attr("stroke-opacity",S?1:0).style("stroke-dasharray",(v=D==null?void 0:D.join(" "))!==null&&v!==void 0?v:null),k=d.values.some(R=>!R.defined),T=this.lineGen(d.values);if(s&&!k){const R=f.attr("d")||this._emptyPath(),nt=T||this._emptyPath();A.attrTween("d",()=>si(R,nt))}else d.visible&&A.attr("d",T);b.attr("d",T).attr("visibility",S?null:"hidden")}),O(l.exit(),s).style("opacity",0).remove()}_emptyPath(){const t=this.xScale.range(),e=this.yScale.range();return`M${t[0]},${e[0]} L${t[1]},${e[0]}`}_highlight(t){const{config:e}=this;e.highlightOnHover&&this.g.selectAll(`.${ut}`).classed(Wt,n=>n!==t)}_resetHighlight(){const{config:t}=this;t.highlightOnHover&&this.g.selectAll(`.${ut}`).classed(Wt,!1)}}yt.selectors=En;var Q;(function(i){i.Start="start",i.Middle="middle",i.End="end"})(Q||(Q={}));var J;(function(i){i.Top="top",i.Middle="middle",i.Bottom="bottom"})(J||(J={}));var wt;(function(i){i.Wrap="wrap",i.Trim="trim"})(wt||(wt={}));var z;(function(i){i.Left="left",i.Center="center",i.Right="right"})(z||(z={}));function Ln(i){switch(i){case z.Center:return"middle";case z.Right:return"end";case z.Left:default:return"start"}}function zn(i){var t;return(t=i.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g))===null||t===void 0?void 0:t.filter(Boolean).map(e=>e.toLowerCase()).join("-")}function Mn(i){return i.replace(/['"]/g,"&#39;").replace(/\u0000/g,"\\0").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\t/g,"\\t").replace(/\f/g,"\\f")}function Bn(i="",t=15){return i.length>t?`…${i.substr(i.length-t,t)}`:i}function In(i="",t=15){const e=Math.floor((t-3)/2);return i.length>t?`${i.substr(0,e)}…${i.substr(-e,e)}`:i}function Pn(i="",t=15){return i.length>t?`${i.substr(0,t)}…`:i}function Wn(i="",t=15,e=Q.Middle){let n=Pn(i,t);return e===Q.Start?n=Bn(i,t):e===Q.Middle&&(n=In(i,t)),n}function Be(i,t=[" "]){let e=[i];for(let n=0;n<t.length;n++){const s=t[n];e.forEach((o,a)=>{const r=o.split(s),l=r.map((c,u)=>`${c}${u===r.length-1?"":s}`);e[a]=l}),e=Et(e)}return e}function Nn(i,t,e=[" ","-",".",","]){const n=i.text();if(!n)return;const s=mt(e)?e:[e],o=Be(n,s),a=parseFloat(i.attr("x"))||0;i.text("");let r=i.append("tspan").attr("x",a),l=`${o[0]}`;r.text(l),o.forEach((c,u)=>{if(u===0)return;const d=`${l}${c}`;r.text(d),r.node().getComputedTextLength()>t?(r.text(l.trim()),r=i.append("tspan").attr("x",a).attr("dy","1.2em").text(c),l=c):l+=c})}function Hn(i,t,e,n,s,o){var a;t===void 0&&(t=50),e===void 0&&(e=Q.Middle),s===void 0&&(s=+((a=window.getComputedStyle(i.node()))===null||a===void 0?void 0:a.fontSize)||0);const r=i.text(),l=r.length,c=s*l*o,d=Math.ceil(l*t/(1.1*c));return d<l?(i.text(Wn(r,d,e)),!0):!1}function xt(i,t,e=kn()){return i.length*t*e||0}function bt(i,t,e){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),o=document.createElementNS(n,"text");o.textContent=i,o.setAttribute("font-size",`${e}`),o.setAttribute("font-family",t),s.appendChild(o),document.body.appendChild(s);const a=o.getComputedTextLength();return document.body.removeChild(s),a}function Vn(i,t=void 0,e=!0,n=De,s=!1){const o=`${i.text}`;if(!o)return[];const a=Array.isArray(n)?n:[n];return o.split(`
`).map(l=>{const c=[];if(!t)return[l];const u=Be(l,a);let d="";for(let h=0;h<u.length;h+=1){(e?xt(d+u[h],i.fontSize,i.fontWidthToHeightRatio):bt(d+u[h],i.fontFamily,i.fontSize))<t||h===0?d+=u[h]:(c.push(d.trim()),d=u[h]);const v=2;if(s)for(;d.trim().length>v&&(e?xt(d,i.fontSize,i.fontWidthToHeightRatio):bt(d,i.fontFamily,i.fontSize))>t;){let f=d.trim().length-v;for(;f>0;){const b=`${d.substring(0,f)}${Re}`;if((e?xt(b,i.fontSize,i.fontWidthToHeightRatio):bt(b,i.fontFamily,i.fontSize))<=t||f===1){c.push(b.trim()),d=d.substring(f);break}f--}}}return d&&c.push(d.trim()),c}).flat()}function Yn(i,t=void 0,e=void 0,n=!0,s=De,o=!1){const a=Array.isArray(i)?i.map(d=>tt(pe,d)):[tt(pe,i)],r=a.map(d=>Vn(d,t,n,s,o)),l=a[0];let c=-l.fontSize*(l.lineHeight-1);const u=[];return a.forEach((d,h)=>{var g;let v=r[h];const p=h>0?u[h-1]:void 0,f=p?p.marginBottom:0,b=d.marginTop,S=Math.max(f,b);c+=S;const D=d.fontSize*d.lineHeight;let A=0;for(let k=0;k<v.length;k+=1){let T=v[k];c+=D;const R=`${T} …`,nt=n?xt(R,d.fontSize,d.fontWidthToHeightRatio):bt(R,d.fontFamily,d.fontSize);if(A=Math.max(nt,A),e&&c+D>e&&k!==v.length-1){T.charAt(T.length-1)===Re&&(T=T.substr(0,v[k].length-1)),nt<t?v[k]=R:v[k]=`${v[k].substr(0,v[k].length-2)}…`,v=v.slice(0,k+1);break}}u.push(Object.assign(Object.assign({},d),{_lines:v,_estimatedHeight:c-((p==null?void 0:p._estimatedHeight)||0),_maxWidth:Math.max(A,(g=p==null?void 0:p._maxWidth)!==null&&g!==void 0?g:0)}))}),u}function Xn(i,t=0,e){return i.map((n,s)=>{const o=s>0?i[s-1]:void 0,a=o?o.marginBottom/o.fontSize:0,r=n.marginTop/n.fontSize,l=Math.max(a,r),c={fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fill:n.color,y:s===0&&e};return`<tspan xmlns="http://www.w3.org/2000/svg" ${Object.entries(c).filter(([d,h])=>h).map(([d,h])=>`${zn(d)}="${Mn(h.toString())}"`).join(" ")}>${n._lines.map((d,h)=>{let g;return s===0&&h===0?g=.8+l:h===0?g=l+n.lineHeight:g=n.lineHeight,`<tspan x="${t}" dy="${g}em">${d.length?d:" "}</tspan>`}).join("")}</tspan>`})}function Un(i){return ci(i,t=>t._estimatedHeight)}const jn=["text","tspan","textPath","altGlyph","altGlyphDef","altGlyphItem","glyphRef","textRef","textArea"];function Gn(i,t,e,n){var s,o;const a=Yn(t,e.width,void 0,e.fastMode,e.separator,e.wordBreak),r=(s=e.x)!==null&&s!==void 0?s:+i.getAttribute("x"),l=(o=e.y)!==null&&o!==void 0?o:+i.getAttribute("y"),c=r??0;let u=l??0;if(e.textAlign&&i.setAttribute("text-anchor",Ln(e.textAlign)),e.verticalAlign&&e.verticalAlign!==J.Top){const d=Un(a),h=e.verticalAlign===J.Middle?-d/2:e.verticalAlign===J.Bottom?-d:0;u+=h}e.textRotationAngle?i.setAttribute("transform",`rotate(${e.textRotationAngle===0||e.textRotationAngle?e.textRotationAngle:0} ${c} ${u})`):i.removeAttribute("transform");{const d=new DOMParser;i.textContent="",a.forEach(h=>{const g=Xn([h],c,u).join(""),v=oi(g,jn),p=d.parseFromString(v,"image/svg+xml").firstChild;i.appendChild(p)})}}const qn=Object.assign(Object.assign({},Tt),{position:void 0,type:void 0,label:void 0,labelFontSize:null,gridLine:!0,tickLine:!0,domainLine:!0,numTicks:void 0,minMaxTicksOnly:!1,tickTextWidth:void 0,tickTextSeparator:void 0,tickTextForceWordBreak:!1,tickTextTrimType:Q.Middle,tickTextFitMode:wt.Wrap,tickTextFontSize:null,tickTextAlign:void 0,tickTextColor:null,labelMargin:8,labelColor:null,tickFormat:void 0,tickValues:void 0,fullSize:!0,tickPadding:8}),Ie=y`
  label: axis-component;
`,Zn=et`
  :root {
    // Undefined by default to allow proper fallback to var(--vis-font-family)
    /* --vis-axis-font-family: */
    --vis-axis-tick-color: #e8e9ef;
    /* --vis-axis-domain-color: // Undefined by default to allow fallback to var(--vis-axis-tick-color) */
    --vis-axis-grid-color: #e8e9ef;
    --vis-axis-label-color: #6c778c;
    --vis-axis-tick-label-color: #6c778c;
    --vis-axis-tick-label-font-size: 12px;
    --vis-axis-tick-label-cursor: default;
    --vis-axis-tick-label-text-decoration: none;
    --vis-axis-label-font-size: 14px;
    --vis-axis-tick-line-width: 1px;
    --vis-axis-grid-line-width: 1px;
    /* --vis-axis-domain-line-width: // Undefined by default to allow fallback to var(--vis-axis-grid-line-width) */

    --vis-dark-axis-tick-color: #6c778c;
    /* --vis-dark-axis-domain-color: // Undefined by default to allow fallback to var(--vis-dark-axis-tick-color) */
    --vis-dark-axis-tick-label-color: #e8e9ef;
    --vis-dark-axis-grid-color: #6c778c;
    --vis-dark-axis-label-color: #fefefe;
  }

  body.theme-dark ${`.${Ie}`} {
    --vis-axis-tick-color: var(--vis-dark-axis-tick-color);
    --vis-axis-domain-color: var(--vis-dark-axis-domain-color);
    --vis-axis-tick-label-color: var(--vis-dark-axis-tick-label-color);
    --vis-axis-grid-color: var(--vis-dark-axis-grid-color);
    --vis-axis-label-color: var(--vis-dark-axis-label-color);
  }
`,Qt=y`
  label: hide-tick-line;
`,Jt=y`
  label: hide-domain;
`,Pe=y`
  label: axis;

  user-select: none;

  .domain {
    stroke: var(--vis-axis-domain-color, var(--vis-axis-tick-color));
    stroke-width: var(--vis-axis-domain-line-width, var(--vis-axis-grid-line-width));
  }

  &${`.${Qt}`} {
    .tick > line {
      opacity: 0;
    }
  }

  &${`.${Jt}`} {
    .domain {
      opacity: 0;
    }
  }
`,We=y`
  label: grid;

  .domain {
    opacity: 0;
  }

  line {
    stroke: var(--vis-axis-grid-color);
    stroke-width: var(--vis-axis-grid-line-width);
  }
`,Ne=y`
  label: tick;

  stroke: none;
  font-size: var(--vis-axis-tick-label-font-size);

  line {
    stroke: var(--vis-axis-tick-color);
    stroke-width: var(--vis-axis-tick-line-width);
  }

  text {
    fill: var(--vis-axis-tick-label-color);
    cursor: var(--vis-axis-tick-label-cursor);
    font-family: var(--vis-axis-font-family, var(--vis-font-family));
    text-decoration: var(--vis-axis-tick-label-text-decoration);
    stroke: none;
  }

`,Nt=y`
  label: label;
  fill: var(--vis-axis-label-color);
  font-size: var(--vis-axis-label-font-size);
  font-family: var(--vis-axis-font-family, var(--vis-font-family));
  text-anchor: middle;
`,He=y`
  label: tick-label;
`,Kn=Object.freeze(Object.defineProperty({__proto__:null,axis:Pe,globalStyles:Zn,grid:We,hideDomain:Jt,hideTickLine:Qt,label:Nt,root:Ie,tick:Ne,tickLabel:He},Symbol.toStringTag,{value:"Module"}));class te extends Kt{constructor(t){super(),this._defaultConfig=qn,this.config=this._defaultConfig,this._defaultNumTicks=3,this._minMaxTicksOnlyEnforceWidth=250,this.events={},t&&this.setConfig(t),this.axisGroup=this.g.append("g"),this.gridGroup=this.g.append("g").attr("class",We)}preRender(){const{config:t}=this,e=this.g.append("g").attr("opacity",0);this._renderAxis(e,0),this._axisRawBBox=e.node().getBBox(),t.tickTextAlign&&this._alignTickLabels(),this._renderAxisLabel(e),this._axisSizeBBox=this._getAxisSize(e),this._requiredMargin=this._getRequiredMargin(this._axisSizeBBox),e.remove()}getPosition(){const{config:{type:t,position:e}}=this;return e??(t===_.X?m.Bottom:m.Left)}_getAxisSize(t){return t.node().getBBox()}_getRequiredMargin(t=this._axisSizeBBox){const{config:{type:e,position:n}}=this;switch(e){case _.X:{const o=this._axisSizeBBox.x+this._axisSizeBBox.width,a=this._axisSizeBBox.x<0?Math.abs(this._axisSizeBBox.x):0,r=o-this._width>1?o-this._width:0;switch(n){case m.Top:return{top:t.height,left:a,right:r};case m.Bottom:default:return{bottom:t.height,left:a,right:r}}}case _.Y:{const s=t.height>this._height?(t.height-this._height)/2:0,o=s,a=s;switch(n){case m.Right:return{right:t.width,top:o,bottom:a};case m.Left:default:return{left:t.width,top:o,bottom:a}}}}}getRequiredMargin(){return this._requiredMargin}getOffset(t){const{config:{type:e,position:n}}=this;switch(e){case _.X:switch(n){case m.Top:return{top:t.top,left:t.left};case m.Bottom:default:return{top:t.top+this._height,left:t.left}}case _.Y:switch(n){case m.Right:return{top:t.top,left:t.left+this._width};case m.Left:default:return{top:t.top,left:t.left}}}}_render(t=this.config.duration,e=this.axisGroup){const{config:n}=this;if(this._renderAxis(e,t),this._renderAxisLabel(e),n.gridLine){const s=this._buildGrid().tickFormat(()=>"");s.tickValues(this._getConfiguredTickValues()),this.gridGroup.selectAll("*").interrupt(),O(this.gridGroup,t).call(s).style("opacity",1)}else O(this.gridGroup,t).style("opacity",0);n.tickTextAlign&&this._alignTickLabels()}_buildAxis(){const{config:{type:t,position:e,tickPadding:n}}=this,s=this._getNumTicks();switch(t){case _.X:switch(e){case m.Top:return he(this.xScale).ticks(s).tickPadding(n);case m.Bottom:default:return de(this.xScale).ticks(s).tickPadding(n)}case _.Y:switch(e){case m.Right:return ce(this.yScale).ticks(s).tickPadding(n);case m.Left:default:return le(this.yScale).ticks(s).tickPadding(n)}}}_buildGrid(){const{config:{type:t,position:e}}=this,n=this._getNumTicks();switch(t){case _.X:switch(e){case m.Top:return he(this.xScale).ticks(n*2).tickSize(-this._height).tickSizeOuter(0);case m.Bottom:default:return de(this.xScale).ticks(n*2).tickSize(-this._height).tickSizeOuter(0)}case _.Y:switch(e){case m.Right:return ce(this.yScale).ticks(n*2).tickSize(-this._width).tickSizeOuter(0);case m.Left:default:return le(this.yScale).ticks(n*2).tickSize(-this._width).tickSizeOuter(0)}}}_renderAxis(t=this.axisGroup,e=this.config.duration){const{config:n}=this,s=this._buildAxis(),o=this._getConfiguredTickValues()||s.scale().ticks(this._getNumTicks());s.tickValues(o),t.selectAll("*").interrupt(),O(t,e).call(s);const a=t.selectAll("g.tick");a.classed(Ne,!0).style("font-size",n.tickTextFontSize);const r=t.selectAll("g.tick > text").filter(l=>o.some(c=>gt(l,c))).classed(He,!0).style("fill",n.tickTextColor);if(r.nodes().forEach(l=>_e(l)),r.each((l,c,u)=>{var d,h;let g=(h=(d=n.tickFormat)===null||d===void 0?void 0:d.call(n,l,c,o))!==null&&h!==void 0?h:`${l}`;const v=u[c],p=n.tickTextWidth||(n.type===_.X?this._containerWidth/(a.size()+1):this._containerWidth/5),f=getComputedStyle(v),b=Number.parseFloat(f.fontSize),S=f.fontFamily,D={verticalAlign:n.type===_.X?J.Top:J.Middle,width:p,textRotationAngle:n.tickTextAngle,separator:n.tickTextSeparator,wordBreak:n.tickTextForceWordBreak};if(n.tickTextFitMode===wt.Trim){const k=E(v).text(g);Hn(k,p,n.tickTextTrimType,!0,b,.58),g=E(v).text()}Gn(v,{text:g,fontFamily:S,fontSize:b},D)}),t.classed(Pe,!0).classed(Qt,!n.tickLine).classed(Jt,!n.domainLine),n.fullSize){const l=this._getFullDomainPath(0);O(t.select(".domain"),e).attr("d",l)}}_getNumTicks(){const{config:{type:t,numTicks:e}}=this;if(e)return e;if(t===_.X){const n=this.xScale.range(),s=n[1]-n[0];return Math.floor(s/175)}if(t===_.Y){const n=this.yScale.range(),s=Math.abs(n[0]-n[1]);return Math.pow(s,.85)/25}return this._defaultNumTicks}_getConfiguredTickValues(){const{config:{tickValues:t,type:e,minMaxTicksOnly:n}}=this,s=e===_.X?this.xScale:this.yScale,o=s==null?void 0:s.domain();return t?t.filter(a=>a>=o[0]&&a<=o[1]):n||e===_.X&&this._width<this._minMaxTicksOnlyEnforceWidth?o:null}_getFullDomainPath(t=0){const{config:{type:e}}=this;switch(e){case _.X:return`M0.5, ${t} V0.5 H${this._width+.5} V${t}`;case _.Y:return`M${-t}, ${this._height+.5} H0.5 V0.5 H${-t}`}}_renderAxisLabel(t=this.axisGroup){var e;const{type:n,label:s,labelMargin:o,labelFontSize:a}=this.config;t.selectAll(`.${Nt}`).remove();const r=this.getPosition(),{width:l,height:c}=(e=this._axisRawBBox)!==null&&e!==void 0?e:t.node().getBBox(),u=n===_.X?this._width/2:Math.pow(-1,+(r===m.Left))*l,d=n===_.X?Math.pow(-1,+(r===m.Top))*c:this._height/2,h=n===_.X?0:Math.pow(-1,+(r===m.Left))*o,g=n===_.X?Math.pow(-1,+(r===m.Top))*o:0,v=n===_.Y?-90:0;t.append("text").attr("class",Nt).text(s).attr("dy",`${this._getLabelDY()}em`).attr("transform",`translate(${u+h},${d+g}) rotate(${v})`).style("font-size",a).style("fill",this.config.labelColor)}_getLabelDY(){const{type:t,position:e}=this.config;switch(t){case _.X:switch(e){case m.Top:return 0;case m.Bottom:default:return .75}case _.Y:switch(e){case m.Right:return .75;case m.Left:default:return-.25}}}_alignTickLabels(){const{config:{type:t,tickTextAlign:e,tickTextAngle:n,position:s}}=this,o=this.g.selectAll("g.tick > text"),a=this._getTickTextAnchor(e),r=t===_.X?0:this._getYTickTextTranslate(e,s);o.attr("transform",`translate(${r},0) rotate(${n})`).attr("text-anchor",a)}_getTickTextAnchor(t){switch(t){case z.Left:return"start";case z.Right:return"end";case z.Center:return"middle";default:return null}}_getYTickTextTranslate(t,e=m.Left){const s=this._axisRawBBox.width-9;switch(t){case z.Left:return e===m.Left?s*-1:0;case z.Right:return e===m.Left?0:s;case z.Center:return e===m.Left?s*-.5:s*.5;default:return 0}}}te.selectors=Kn;var M;(function(i){i.Circle="circle",i.Cross="cross",i.Diamond="diamond",i.Square="square",i.Star="star",i.Triangle="triangle",i.Wye="wye"})(M||(M={}));const Qn={[M.Circle]:ji,[M.Cross]:Gi,[M.Diamond]:qi,[M.Square]:Zi,[M.Star]:Ki,[M.Triangle]:Qi,[M.Wye]:Ji},F=Object.assign(Object.assign({},M),{Line:"line"});var At;(function(i){i.Horizontal="horizontal",i.Vertical="vertical"})(At||(At={}));const Jn={items:[],labelClassName:"",onLegendItemClick:void 0,labelFontSize:null,labelMaxWidth:null,bulletSize:null,bulletShape:i=>{var t;return(t=i.shape)!==null&&t!==void 0?t:F.Circle},orientation:At.Horizontal,renderIntoProvidedDomNode:!1},Ft=pt*3,ts={[F.Circle]:Math.PI/4,[F.Cross]:5/9,[F.Diamond]:Math.sqrt(3)/6,[F.Square]:1,[F.Star]:.3,[F.Triangle]:Math.sqrt(3)/4,[F.Wye]:5/11};function es(i){i.each((t,e,n)=>{E(n[e]).append("svg").attr("width","100%").attr("height","100%").append("path")})}function is(i,t,e){i.each((n,s,o)=>{const a=jt(n,t.bulletShape,s),r=W(n,e,s),l=Ft,c=a===F.Line?Ft/2.5:Ft,d=E(o[s]).select("svg").attr("viewBox",`0 0 ${l} ${c}`).select("path").attr("stroke",r),h=n.inactive?"var(--vis-legend-bullet-inactive-opacity)":1;if(a===F.Line)d.attr("d",`M0,${c/2} L${l/2},${c/2} L${l},${c/2}`).attr("transform",null).style("opacity",h).style("stroke-width","3px").style("fill",null).style("fill-opacity",null).style("marker-start","none").style("marker-end","none");else{const g=tn().type(Qn[a]).size(l*c*ts[a]),v=(l-2)/l;let p=c/2;switch(a){case F.Triangle:p+=c/8;break;case F.Star:p+=c/16;break;case F.Wye:p-=c/16;break}d.attr("d",g).attr("transform",`translate(${l/2}, ${Math.round(p)}) scale(${v})`).style("stroke-width","1px").style("opacity",null).style("fill",r).style("fill-opacity",h)}})}const ee=y`
  label: bullet-legend-component;
`,ns=et`
  :root {
    // Undefined by default to allow proper fallback to var(--vis-font-family)
    /* --vis-legend-font-family: */

    --vis-legend-label-color: #6c778c;
    --vis-legend-label-max-width: 300px;
    --vis-legend-label-font-size: 12px;
    --vis-legend-bullet-size: 9px;
    --vis-legend-bullet-inactive-opacity: 0.15;
    --vis-legend-item-spacing: 20px;
    --vis-legend-vertical-item-spacing: 5px;
    --vis-legend-bullet-label-spacing: 8px;

    --vis-dark-legend-label-color: #eee;
  }

  body.theme-dark ${`.${ee}`} {
    --vis-legend-label-color: var(--vis-dark-legend-label-color);
  }

  body.theme-patterns {
    --vis-legend-bullet-size: 14px;
  }
`,_t=y`
  label: legendItem;
  display: inline-flex;
  align-items: center;
  font-family: var(--vis-legend-font-family, var(--vis-font-family));
  margin-right: var(--vis-legend-item-spacing);
  white-space: nowrap;
  cursor: default;
  user-select: none;
  max-width: min-content;
`,Ve=y`
  label: legendItemVertical;
  display: flex;
  margin-top: var(--vis-legend-vertical-item-spacing);
`,Ye=y`
  cursor: pointer;
`,Ht=y`
  label: legendItemLabel;
  font-size: var(--vis-legend-label-font-size);
  display: inline-block;
  vertical-align: middle;
  color: var(--vis-legend-label-color);
  max-width: var(--vis-legend-label-max-width);
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`,Vt=y`
  flex: 0 0 auto;
  label: legendItemBullet;
  margin-right: var(--vis-legend-bullet-label-spacing);
  height: var(--vis-legend-bullet-size);
  width: var(--vis-legend-bullet-size);

  svg {
    display: block;
  }
`,ss=Object.freeze(Object.defineProperty({__proto__:null,bullet:Vt,clickable:Ye,item:_t,itemVertical:Ve,label:Ht,root:ee,variables:ns},Symbol.toStringTag,{value:"Module"}));class Xe{constructor(t,e){this._defaultConfig=Jn,this.config=this._defaultConfig,this._colorAccessor=n=>n.color,this._container=t,this.div=e!=null&&e.renderIntoProvidedDomNode?E(this._container):E(this._container).append("div"),this.div.classed(ee,!0),this.element=this.div.node(),e&&this.update(e)}update(t){this.prevConfig=this.config,this.config=tt(this._defaultConfig,t),this.render()}render(){const{config:t}=this,e=this.div.selectAll(`.${_t}`).data(t.items),n=e.enter().append("div").on("click",this._onItemClick.bind(this)),s=n.merge(e);s.attr("class",o=>{var a;return`${_t} ${(a=o.className)!==null&&a!==void 0?a:""}`}).classed(Ve,t.orientation===At.Vertical).classed(Ye,o=>!!t.onLegendItemClick&&this._isItemClickable(o)).attr("title",o=>o.name).style("display",o=>o.hidden?"none":null),n.append("span").attr("class",Vt).call(es),s.select(`.${Vt}`).style("width",t.bulletSize).style("height",t.bulletSize).style("box-sizing","content-box").call(is,this.config,this._colorAccessor),n.append("span").attr("class",Ht).classed(t.labelClassName,!0).style("max-width",t.labelMaxWidth).style("font-size",t.labelFontSize),s.select(`.${Ht}`).text(o=>o.name),e.exit().remove()}_isItemClickable(t){return t.pointer===void 0?!0:t.pointer}_onItemClick(t,e){const{config:{onLegendItemClick:n}}=this,o=this.div.selectAll(`.${_t}`).nodes().indexOf(t.currentTarget);n&&n(e,o)}destroy(){this.element!==this._container&&this.div.remove()}}Xe.selectors=ss;const os=Object.assign(Object.assign({},Tt),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(i,t)=>"",hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0}),as=et`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,rs=y`
  label: crosshair-component;
`,Ue=y`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,je=y`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`,ls=Object.freeze(Object.defineProperty({__proto__:null,circle:je,globalStyles:as,line:Ue,root:rs},Symbol.toStringTag,{value:"Module"}));class Ge extends Kt{constructor(t){super(),this.clippable=!0,this._defaultConfig=os,this.config=this._defaultConfig,this.x=0,this.show=!1,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},t&&this.setConfig(t),this.g.style("opacity",this.show?1:0),this.line=this.g.append("line").attr("class",Ue)}set accessors(t){this._accessors=t}get accessors(){var t;const{config:e}=this,n=!!(e.x||e.y||e.yStacked),s=n?e.x:this._accessors.x,o=n?e.y:this._accessors.y,a=o?mt(o)?o:[o]:void 0,r=n?e.yStacked:this._accessors.yStacked,l=(t=e.baseline)!==null&&t!==void 0?t:this._accessors.baseline;return{x:s,y:a,yStacked:r,baseline:l}}setContainer(t){this.container=t,this.container.on("mousemove.crosshair",this._onMouseMove.bind(this)),this.container.on("mouseout.crosshair",this._onMouseOut.bind(this))}_render(t){const{config:e}=this;if(e.snapToData&&!this.datum)return;const n=H(t)?t:e.duration;O(this.g,n).style("opacity",this.show?1:0),this.line.attr("y1",0).attr("y1",this._height),O(this.line,n,ue).attr("x1",this.x).attr("x2",this.x);const s=this.getCircleData(),o=this.g.selectAll("circle").data(s,(r,l)=>{var c;return(c=r.id)!==null&&c!==void 0?c:l}),a=o.enter().append("circle").attr("class",je).attr("r",0).attr("cx",this.x).attr("cy",r=>r.y).style("fill",r=>r.color).style("stroke",r=>r.strokeColor).style("stroke-width",r=>r.strokeWidth);O(a.merge(o),n,ue).attr("cx",this.x).attr("cy",r=>r.y).attr("r",4).style("opacity",r=>r.opacity).style("fill",r=>r.color).style("stroke",r=>r.strokeColor).style("stroke-width",r=>r.strokeWidth),o.exit().remove()}hide(){this._onMouseOut()}_onMouseMove(t){var e,n;const{config:s,datamodel:o,element:a}=this;!this.accessors.x&&(!((e=o.data)===null||e===void 0)&&e.length)&&console.warn("Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object");const[r]=Ot(t,a),l=this.xScale.range();if(s.snapToData){!this.accessors.y&&!this.accessors.yStacked&&(!((n=o.data)===null||n===void 0)&&n.length)&&console.warn("Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object");const c=this.xScale,u=c.invert(r);if(this.datum=un(o.data,u,this.accessors.x),this.datumIndex=o.data.indexOf(this.datum),!this.datum)return;this.x=P(Math.round(c($(this.datum,this.accessors.x,this.datumIndex))),0,this._width),this.show=this.x>=0&&this.x<=this._width&&(!s.hideWhenFarFromPointer||Math.abs(this.x-r)<s.hideWhenFarFromPointerDistance)}else this.x=P(r,l[0],l[1]),this.show=r>=l[0]-2&&r<=l[1]+2;window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()}),this.show?this._showTooltip(t):this._hideTooltip()}_onMouseOut(){this.show=!1,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()}),this._hideTooltip()}_showTooltip(t){var e;const{config:n}=this,s=(e=n.tooltip)!==null&&e!==void 0?e:this.tooltip;if(!s)return;const o=s.getContainer()||this.container.node(),[a,r]=s.isContainerBody()?[t.clientX,t.clientY]:Ot(t,o),l=n.template(this.datum,this.xScale.invert(this.x));l&&s.show(l,{x:a,y:r})}_hideTooltip(){var t;const{config:e}=this,n=(t=e.tooltip)!==null&&t!==void 0?t:this.tooltip;n==null||n.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(){var t,e;const{config:n,datamodel:{data:s}}=this;if(Xt(n.getCircles))return n.getCircles(this.xScale.invert(this.x),s,this.yScale);if(n.snapToData&&this.datum){const o=(t=this.accessors.y)!==null&&t!==void 0?t:[],a=(e=this.accessors.yStacked)!==null&&e!==void 0?e:[],r=$(this.datum,this.accessors.baseline,this.datumIndex)||0,l=cn(this.datum,this.datumIndex,...a).map((u,d,h)=>({y:this.yScale(u+r),opacity:H($(this.datum,a[d]))?1:0,color:W(this.datum,n.color,d),strokeColor:n.strokeColor?W(this.datum,n.strokeColor,d):void 0,strokeWidth:n.strokeWidth?$(this.datum,n.strokeWidth,d):void 0})),c=o.map((u,d)=>{const h=$(this.datum,u);return{y:this.yScale(h),opacity:H(h)?1:0,color:W(this.datum,n.color,l.length+d),strokeColor:n.strokeColor?W(this.datum,n.strokeColor,d):void 0,strokeWidth:n.strokeWidth?$(this.datum,n.strokeWidth,d):void 0}});return l.concat(c)}return[]}}Ge.selectors=ls;const cs=Object.assign(Object.assign({},Zt),{id:(i,t)=>{var e;return(e=i.id)!==null&&e!==void 0?e:t},value:void 0,angleRange:[0,2*Math.PI],padAngle:0,sortFunction:void 0,cornerRadius:0,color:void 0,radius:void 0,arcWidth:20,centralLabel:void 0,centralSubLabel:void 0,centralSubLabelWrap:!0,showEmptySegments:!1,emptySegmentAngle:.5*Math.PI/180,showBackground:!0,backgroundAngleRange:void 0});function ds(i,t){i.style("fill",e=>W(e.data,t.color,e.index)).style("opacity",0).each((e,n,s)=>{const o=s[n],a=(e.startAngle+e.endAngle)/2,r=(e.endAngle-e.startAngle)/2;o._animState={startAngle:a-r,endAngle:a+r,innerRadius:e.innerRadius,outerRadius:e.outerRadius,padAngle:e.padAngle}})}function hs(i,t,e,n){i.style("transition",`fill ${n}ms`).style("fill",o=>W(o.data,t.color,o.index));const s=o=>t.showEmptySegments||o.value?1:0;n?O(i,n).style("opacity",s).attrTween("d",(a,r,l)=>{const c=l[r],u={startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,padAngle:a.padAngle},d=sn(c._animState,u);return h=>(c._animState=d(h),e(c._animState))}):i.attr("d",e).style("opacity",s)}function us(i,t){O(i,t).style("opacity",0).remove()}const qe=y`
  label: donut-component;
`,fs=et`
  :root {
    --vis-donut-central-label-font-size: 16px;
    --vis-donut-central-label-text-color: #5b5f6d;
    // Undefined by default to allow proper fallback to var(--vis-font-family)
    /* --vis-donut-central-label-font-family: */
    --vis-donut-central-label-font-weight: 600;

    --vis-donut-central-sub-label-font-size: 12px;
    --vis-donut-central-sub-label-text-color: #5b5f6d;
    // Undefined by default to allow proper fallback to var(--vis-font-family)
    /* --vis-donut-central-sub-label-font-family: */
    --vis-donut-central-sub-label-font-weight: 500;

    --vis-donut-background-color: #E7E9F3;
    --vis-donut-segment-stroke-width: 0;
    // The line segment color variable is not defined by default
    // to allow it to fallback to the donut background color
    /* --vis-donut-segment-stroke-color: none; */

    --vis-dark-donut-central-label-text-color: #C2BECE;
    --vis-dark-donut-central-sub-label-text-color: #C2BECE;
    --vis-dark-donut-background-color: #18160C;
  }

  body.theme-dark ${`.${qe}`} {
    --vis-donut-central-label-text-color: var(--vis-dark-donut-central-label-text-color);
    --vis-donut-central-sub-label-text-color: var(--vis-dark-donut-central-sub-label-text-color);
    --vis-donut-background-color: var(--vis-dark-donut-background-color);
  }
`,Ze=y`
  label: background;
  fill: var(--vis-donut-background-color);
`,Yt=y`
  label: segment;
  stroke-width: var(--vis-donut-segment-stroke-width);
  stroke: var(--vis-donut-segment-stroke-color, var(--vis-donut-background-color));
`,Ke=y`
  label: segment-exit;
`,Qe=y`
  label: central-label;
  text-anchor: middle;
  dominant-baseline: middle;
  font-size: var(--vis-donut-central-label-font-size);
  font-family: var(--vis-donut-central-label-font-family, var(--vis-font-family));
  font-weight: var(--vis-donut-central-label-font-weight);
  fill: var(--vis-donut-central-label-text-color);
`,Je=y`
  label: central-label;
  text-anchor: middle;
  dominant-baseline: middle;
  font-size: var(--vis-donut-central-sub-label-font-size);
  font-family: var(--vis-donut-central-sub-label-font-family, var(--vis-font-family));
  font-weight: var(--vis-donut-central-sub-label-font-weight);
  fill: var(--vis-donut-central-sub-label-text-color);
`,gs=Object.freeze(Object.defineProperty({__proto__:null,background:Ze,centralLabel:Qe,centralSubLabel:Je,root:qe,segment:Yt,segmentExit:Ke,variables:fs},Symbol.toStringTag,{value:"Module"}));class ie extends Fe{constructor(t){super(),this._defaultConfig=cs,this.config=this._defaultConfig,this.datamodel=new Oe,this.arcGen=en(),this.events={},t&&this.setConfig(t),this.arcBackground=this.g.append("path"),this.arcGroup=this.g.append("g"),this.centralLabel=this.g.append("text").attr("class",Qe),this.centralSubLabel=this.g.append("text").attr("class",Je)}get bleed(){return{top:0,bottom:0,left:0,right:0}}_render(t){var e,n,s,o,a,r,l,c,u,d,h,g,v,p;const{config:f,datamodel:b,bleed:S}=this,D=b.data.map((x,I)=>({index:I,datum:x})).filter(x=>f.showEmptySegments||$(x.datum,f.value,x.index)),A=H(t)?t:f.duration,k=f.radius||Math.min(this._width-S.left-S.right,this._height-S.top-S.bottom)/2,T=f.arcWidth===0?0:P(k-f.arcWidth,0,k-1);this.arcGen.startAngle(x=>x.startAngle).endAngle(x=>x.endAngle).innerRadius(x=>x.innerRadius).outerRadius(x=>x.outerRadius).padAngle(x=>x.padAngle).cornerRadius(f.cornerRadius);const R=nn().startAngle((n=(e=f.angleRange)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:0).endAngle((o=(s=f.angleRange)===null||s===void 0?void 0:s[1])!==null&&o!==void 0?o:2*Math.PI).padAngle(f.padAngle).value(x=>$(x.datum,f.value,x.index)||0).sort((x,I)=>{var Dt;return(Dt=f.sortFunction)===null||Dt===void 0?void 0:Dt.call(f,x.datum,I.datum)});this.arcGroup.attr("transform",`translate(${this._width/2},${this._height/2})`);const nt=R(D).map(x=>{const I=Object.assign(Object.assign({},x),{data:x.data.datum,index:x.data.index,innerRadius:T,outerRadius:k});return f.showEmptySegments&&x.endAngle-x.startAngle-x.padAngle<=Number.EPSILON&&(I.endAngle=x.startAngle+Math.max(f.emptySegmentAngle,f.padAngle),I.padAngle=x.padAngle/2),I}),ct=this.arcGroup.selectAll(`.${Yt}`).data(nt,x=>f.id(x.data,x.index)),ni=ct.enter().append("path").attr("class",Yt).call(ds,f),se=ct.merge(ni);se.call(hs,f,this.arcGen,A),se.sort((x,I)=>I.value-x.value),ct.exit().attr("class",Ke).call(us,A),this.centralLabel.attr("transform",`translate(${this._width/2},${this._height/2})`).attr("dy",f.centralSubLabel?"-0.55em":null).text((a=f.centralLabel)!==null&&a!==void 0?a:null),this.centralSubLabel.attr("transform",`translate(${this._width/2},${this._height/2})`).attr("dy",f.centralLabel?"0.55em":null).text((r=f.centralSubLabel)!==null&&r!==void 0?r:null),f.centralSubLabelWrap&&Nn(this.centralSubLabel,T*1.9),this.arcBackground.attr("class",Ze).attr("visibility",f.showBackground?null:"hidden").attr("transform",`translate(${this._width/2},${this._height/2})`),O(this.arcBackground,A).attr("d",this.arcGen({startAngle:(d=(c=(l=f.backgroundAngleRange)===null||l===void 0?void 0:l[0])!==null&&c!==void 0?c:(u=f.angleRange)===null||u===void 0?void 0:u[0])!==null&&d!==void 0?d:0,endAngle:(p=(g=(h=f.backgroundAngleRange)===null||h===void 0?void 0:h[1])!==null&&g!==void 0?g:(v=f.angleRange)===null||v===void 0?void 0:v[1])!==null&&p!==void 0?p:2*Math.PI,innerRadius:T,outerRadius:k}))}}ie.selectors=gs;const $t=Symbol("componentAccessorKey"),ne=Symbol("tooltipAccessorKey"),ti=Symbol("crosshairAccessorKey"),ei=Symbol("axisAccessorKey"),ii=Symbol("annotationsAccessorKey");function lt(i,t){return gt(i,t)}function Z(i){const t=di(),e=t.attrs;return at(()=>{const n={},s=(t==null?void 0:t.vnode.props)??{};return Object.keys(s).forEach(o=>{n[re(o)]=i[re(o)]}),{...n,...e}})}const Is=U({__name:"index",props:{components:{},xScale:{type:[Object,Function]},xDomain:{},xDomainMinConstraint:{},xDomainMaxConstraint:{},xRange:{},yScale:{type:[Object,Function]},yDomain:{},yDomainMinConstraint:{},yDomainMaxConstraint:{},yRange:{},yDirection:{},xAxis:{},yAxis:{},autoMargin:{type:Boolean},tooltip:{},crosshair:{},preventEmptyDomain:{type:[Boolean,null]},scaleByDomain:{type:Boolean},annotations:{},duration:{},margin:{},padding:{},sizing:{},width:{},height:{},svgDefs:{},ariaLabel:{},data:{}},setup(i,{expose:t}){const e=i,{data:n}=ke(e),s=Z(e),o=B(),a=Se({components:[],annotations:void 0,crosshair:void 0,tooltip:void 0,xAxis:void 0,yAxis:void 0}),r=B();return L(n,()=>{o.value&&o.value.setData(n.value,!0)}),Ce(()=>{var l;a.components.map(c=>c.config),(l=o.value)==null||l.updateContainer({...st(s.value),...st(a)})}),it(()=>{r.value&&(o.value=new An(r.value,{...st(a)},n.value))}),j(()=>{var l;return(l=o.value)==null?void 0:l.destroy()}),X($t,{data:n,update:l=>a.components=[...a.components,l],destroy:()=>{var l;return a.components=(l=a.components)==null?void 0:l.filter(c=>!c.isDestroyed())}}),X(ei,{data:n,update:l=>a[`${l.config.type}Axis`]=l,destroy:l=>{a[`${l}Axis`]=void 0}}),X(ti,{data:n,update:l=>a.crosshair=l,destroy:()=>{a.crosshair=void 0}}),X(ne,{data:n,update:l=>a.tooltip=l,destroy:()=>{a.tooltip=void 0}}),X(ii,{data:n,update:l=>a.annotations=l,destroy:()=>{a.annotations=void 0}}),t({component:o}),(l,c)=>(G(),q("div",{"data-vis-xy-container":"",ref_key:"elRef",ref:r,class:"unovis-xy-container"},[we(l.$slots,"default")],512))}}),Ps=U({__name:"index",props:{component:{},tooltip:{},annotations:{},duration:{},margin:{},padding:{},sizing:{},width:{},height:{},svgDefs:{},ariaLabel:{},data:{}},setup(i,{expose:t}){const e=i,{data:n}=ke(e),s=Z(e);let o;const a=Se({component:void 0,tooltip:void 0,annotations:void 0}),r=B(),l=()=>{o||r.value&&a.component&&(o=new Cn(r.value,{...st(a)},n.value))};return Ce(()=>{var c;l(),(c=a.component)==null||c.config,o==null||o.updateContainer({...st(s.value),...st(a)})}),L(n,()=>{o?o.setData(n.value,!0):l()}),j(()=>o==null?void 0:o.destroy()),X($t,{data:n,update:c=>a.component=c,destroy:()=>a.component=void 0}),X(ne,{data:n,update:c=>a.tooltip=c,destroy:()=>{a.tooltip=void 0}}),X(ii,{data:n,update:c=>a.annotations=c,destroy:()=>{a.annotations=void 0}}),t({component:o}),(c,u)=>(G(),q("div",{"data-vis-single-container":"",ref_key:"elRef",ref:r,class:"unovis-single-container"},[we(c.$slots,"default")],512))}}),ps={"data-vis-axis":""};te.selectors;const Ws=U({__name:"index",props:{position:{},type:{},fullSize:{type:Boolean},label:{},labelFontSize:{},labelMargin:{},labelColor:{},gridLine:{type:Boolean},tickLine:{type:Boolean},domainLine:{type:Boolean},minMaxTicksOnly:{type:Boolean},tickFormat:{type:Function},tickValues:{},numTicks:{},tickTextFitMode:{},tickTextWidth:{},tickTextSeparator:{},tickTextForceWordBreak:{type:Boolean},tickTextTrimType:{},tickTextFontSize:{},tickTextAlign:{},tickTextColor:{},tickTextAngle:{},tickPadding:{},x:{type:[Function,Number,null]},y:{type:[Function,Number,null,Array]},id:{type:Function},color:{type:[Function,String,Array,null]},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(i,{expose:t}){const e=i,n=vt(ei),s=at(()=>n.data.value??e.data),o=Z(e),a=B();return it(()=>{rt(()=>{var r;a.value=new te(o.value),(r=a.value)==null||r.setData(s.value),n.update(a.value)})}),j(()=>{var r;(r=a.value)==null||r.destroy(),n.destroy(e.type)}),L(o,(r,l)=>{var c;lt(r,l)||(c=a.value)==null||c.setConfig(o.value)}),L(s,()=>{var r;(r=a.value)==null||r.setData(s.value)}),t({component:a}),(r,l)=>(G(),q("div",ps))}}),vs={"data-vis-crosshair":""},Ns=U({__name:"index",props:{data:{}},setup(i,{expose:t}){const e=i,n=vt(ti),s=at(()=>n.data.value??e.data),o=Z(e),a=B();return it(()=>{rt(()=>{var r;a.value=new Ge(o.value),(r=a.value)==null||r.setData(s.value),n.update(a.value)})}),j(()=>{var r;(r=a.value)==null||r.destroy(),n.destroy()}),L(o,(r,l)=>{var c;lt(r,l)||(c=a.value)==null||c.setConfig(o.value)}),L(s,()=>{var r;(r=a.value)==null||r.setData(s.value)}),t({component:a}),(r,l)=>(G(),q("div",vs))}}),ms={"data-vis-component":""};yt.selectors;const Hs=U({__name:"index",props:{color:{type:[Function,String,Array,null]},curveType:{},lineWidth:{},lineDashArray:{type:[Function,null]},fallbackValue:{},highlightOnHover:{type:Boolean},cursor:{type:[Function,String,null]},x:{type:[Function,Number,null]},y:{type:[Function,Number,null,Array]},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(i,{expose:t}){const e=i,n=vt($t),s=at(()=>n.data.value??e.data),o=Z(e),a=B();return it(()=>{rt(()=>{var r;a.value=new yt(o.value),(r=a.value)==null||r.setData(s.value),n.update(a.value)})}),j(()=>{var r;(r=a.value)==null||r.destroy(),n.destroy()}),L(o,(r,l)=>{var c;lt(r,l)||(c=a.value)==null||c.setConfig(o.value)}),L(s,()=>{var r;(r=a.value)==null||r.setData(s.value)}),t({component:a}),(r,l)=>(G(),q("div",ms))}}),ys={"data-vis-component":""};ie.selectors;const Vs=U({__name:"index",props:{id:{type:Function},value:{type:[Function,Number,null]},angleRange:{},padAngle:{},sortFunction:{type:Function},cornerRadius:{},color:{type:[Function,String,Array,null]},radius:{},arcWidth:{},centralLabel:{},centralSubLabel:{},centralSubLabelWrap:{type:Boolean},showEmptySegments:{type:Boolean},emptySegmentAngle:{},showBackground:{type:Boolean},backgroundAngleRange:{},duration:{},events:{},attributes:{},data:{}},setup(i,{expose:t}){const e=i,n=vt($t),s=at(()=>n.data.value??e.data),o=Z(e),a=B();return it(()=>{rt(()=>{var r;a.value=new ie(o.value),(r=a.value)==null||r.setData(s.value),n.update(a.value)})}),j(()=>{var r;(r=a.value)==null||r.destroy(),n.destroy()}),L(o,(r,l)=>{var c;lt(r,l)||(c=a.value)==null||c.setConfig(o.value)}),L(s,()=>{var r;(r=a.value)==null||r.setData(s.value)}),t({component:a}),(r,l)=>(G(),q("div",ys))}}),xs={"data-vis-tooltip":""},Ys=U({__name:"index",props:{components:{},container:{},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},data:{}},setup(i,{expose:t}){const e=i,n=vt(ne),s=Z(e),o=B();return it(()=>{rt(()=>{o.value=new Me(s.value),n.update(o.value)})}),j(()=>{var a;(a=o.value)==null||a.destroy(),n.destroy()}),L(s,(a,r)=>{var l;lt(a,r)||(l=o.value)==null||l.setConfig(s.value)}),t({component:o}),(a,r)=>(G(),q("div",xs))}}),Xs=U({__name:"index",props:{items:{},labelClassName:{},onLegendItemClick:{type:Function},labelFontSize:{},labelMaxWidth:{},bulletSize:{},bulletShape:{type:[Function,null]},orientation:{},renderIntoProvidedDomNode:{type:Boolean},data:{}},setup(i,{expose:t}){const e=i;at(()=>e.data);const n=Z(e),s=B(),o=B();return it(()=>{rt(()=>{o.value&&(s.value=new Xe(o.value,{...n.value,renderIntoProvidedDomNode:!0}))})}),j(()=>{var a;(a=s.value)==null||a.destroy()}),L(n,(a,r)=>{var l;lt(a,r)||(l=s.value)==null||l.update(n.value)}),t({component:s}),(a,r)=>(G(),q("div",{"data-vis-bullet-legend":"",ref_key:"elRef",ref:o},null,512))}});(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".unovis-xy-container,.unovis-single-container{display:block;position:relative;width:100%}[data-vis-leaflet-flow-map],[data-vis-leaflet-map]{display:block;position:relative}[data-vis-bullet-legend]{display:block}")),document.head.appendChild(i)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();export{Is as $,Ns as A,Xe as B,Ys as C,ie as D,Vs as L,Xs as P,Ms as _,C as a,Ps as b,yt as c,Hs as d,te as e,Ws as j,Bs as o};
