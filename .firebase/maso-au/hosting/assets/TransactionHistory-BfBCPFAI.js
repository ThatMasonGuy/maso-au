import{u as X}from"./vue-router-CrvMPvpV.js";import{h as _,l as G,f as Y,i as Z,b as ee,c as N,a as M,r as ae}from"./index-fh3STtDl.js";import{z as te,x as se,y as le}from"./@firebase-CBgXa-9_.js";import{_ as re}from"./AccountingSidebar-pKQpwrKS.js";import{d as oe,_ as ne,a as ue,b as de,c as A}from"./SelectScrollDownButton-BK2d6S2D.js";import{x as L,ad as ie,_ as x,ae as ce,af as pe,ag as fe,ah as me,ai as _e,aj as ye,ak as he,al as ge,am as qe,an as ve,ao as $e,G as xe,c as be,n as we,T as Ce,d as Be}from"./radix-vue-6Z8x3TUN.js";import{b as Pe,_ as De,a as ke}from"./PopoverContent-CzFdbroM.js";import{c as y,b as d,D as c,E as a,J as t,u as e,e as g,d as q,P as V,T as S,M as i,L as C,G as h,q as m,H as R,I,a8 as E,r as D,m as Te,K}from"./@vue-DsGlF1-j.js";import{c as Ve,d as Se}from"./@radix-icons-C7iqcNif.js";import{a as Fe,b as Q,c as U,d as Ne,e as H,_ as Ae}from"./TableRow-yn4ap3en.js";import{_ as Ue}from"./index-CXtsQSRt.js";import{r as He,d as Oe,f as je}from"./vaul-vue-DSkg82Kv.js";import{q as ze,i as Ge}from"./@heroicons-DH5_RU0z.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vue-sonner-B2EpXGAv.js";import"./firebase-BQhzl84B.js";import"./vuex--kc_uza-.js";import"./@unovis-B16_51NZ.js";import"./@emotion-Dz_S_Xyw.js";import"./stylis-YPZU7XtI.js";import"./d3-transition-fhQpLGwb.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-DY0Cqdkz.js";import"./d3-color-Ceo1QMNe.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-Ox4sgw_u.js";import"./d3-interpolate-path-CTc7ZuM7.js";import"./striptags-CDKagow6.js";import"./@vueup-qMjKR5Ws.js";import"./quill-delta-COPIFlMW.js";import"./fast-diff-DNDSwfiB.js";import"./lodash.clonedeep-CrPEM4m0.js";import"./lodash.isequal-CemT60YI.js";import"./to-px-DReLD3CO.js";import"./parse-unit-3UrBcP19.js";import"./d3-array-BJvpcdQ_.js";import"./@juggle-C8OzoCMD.js";import"./d3-axis-Cf4shvhW.js";import"./d3-scale-A6k9qkjg.js";import"./internmap-BkD7Hj8s.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-COsUQkot.js";import"./d3-time-B8hJ2rEE.js";import"./d3-shape-D7Hvm6M3.js";import"./d3-path-CimkQT29.js";import"./throttle-debounce-BnOnwhtV.js";import"./embla-carousel-vue-CXHqejTr.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-QtEXB4oT.js";import"./@vueuse-H75eWtDf.js";import"./embla-carousel-autoplay-0OO14Ffu.js";import"./vuex-persistedstate-D4njCX8q.js";import"./maska-Cp-LWreF.js";import"./@internationalized-D5LszBdy.js";import"./@swc-BOtJyCjG.js";import"./@floating-ui-B6PpBHZy.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";import"./TooltipTrigger-Bqh97bnl.js";const Le={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Re={__name:"Calendar",props:{modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},defaultPlaceholder:{type:null,required:!1},placeholder:{type:null,required:!1},pagedNavigation:{type:Boolean,required:!1},preventDeselect:{type:Boolean,required:!1},weekStartsOn:{type:Number,required:!1},weekdayFormat:{type:String,required:!1},calendarLabel:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},locale:{type:String,required:!1},numberOfMonths:{type:Number,required:!1},disabled:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},initialFocus:{type:Boolean,required:!1},isDateDisabled:{type:Function,required:!1},isDateUnavailable:{type:Function,required:!1},dir:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue","update:placeholder"],setup(o,{emit:l}){const r=o,n=l,s=y(()=>{const{class:v,...F}=r;return F}),u=L(s,n);return(v,F)=>(d(),c(e(ie),h({class:e(_)("p-3",r.class)},e(u)),{default:a(({grid:O,weekDays:B})=>[t(e(We),null,{default:a(()=>[t(e(Ze)),t(e(Xe)),t(e(Ye))]),_:1}),g("div",Le,[(d(!0),q(V,null,S(O,k=>(d(),c(e(Me),{key:k.value.toString()},{default:a(()=>[t(e(Qe),null,{default:a(()=>[t(e(J),null,{default:a(()=>[(d(!0),q(V,null,S(B,P=>(d(),c(e(Je),{key:P},{default:a(()=>[i(C(P),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(Ke),null,{default:a(()=>[(d(!0),q(V,null,S(k.rows,(P,j)=>(d(),c(e(J),{key:`weekDate-${j}`,class:"mt-2 w-full"},{default:a(()=>[(d(!0),q(V,null,S(P,T=>(d(),c(e(Ie),{key:T.toString(),date:T},{default:a(()=>[t(e(Ee),{day:T,month:k.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}},Ie={__name:"CalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(ce),h({class:e(_)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-month])]:bg-accent/50",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default")]),_:3},16,["class"]))}},Ee={__name:"CalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(pe),h({class:e(_)(e(G)({variant:"ghost"}),"h-8 w-8 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-month]:pointer-events-none data-[outside-month]:text-muted-foreground data-[outside-month]:opacity-50 [&[data-outside-month][data-selected]]:bg-accent/50 [&[data-outside-month][data-selected]]:text-muted-foreground [&[data-outside-month][data-selected]]:opacity-30",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default")]),_:3},16,["class"]))}},Me={__name:"CalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(fe),h({class:e(_)("w-full border-collapse space-y-1",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default")]),_:3},16,["class"]))}},Ke={__name:"CalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const l=o;return(r,n)=>(d(),c(e(me),R(I(l)),{default:a(()=>[m(r.$slots,"default")]),_:3},16))}},Qe={__name:"CalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o;return(r,n)=>(d(),c(e(_e),R(I(l)),{default:a(()=>[m(r.$slots,"default")]),_:3},16))}},J={__name:"CalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(ye),h({class:e(_)("flex",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default")]),_:3},16,["class"]))}},Je={__name:"CalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(he),h({class:e(_)("w-8 rounded-md text-[0.8rem] font-normal text-muted-foreground",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default")]),_:3},16,["class"]))}},We={__name:"CalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(ge),h({class:e(_)("relative flex w-full items-center justify-between pt-1",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default")]),_:3},16,["class"]))}},Xe={__name:"CalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(qe),h({class:e(_)("text-sm font-medium",l.class)},e(n)),{default:a(({headingValue:v})=>[m(s.$slots,"default",{headingValue:v},()=>[i(C(v),1)])]),_:3},16,["class"]))}},Ye={__name:"CalendarNextButton",props:{step:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e(ve),h({class:e(_)(e(G)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default",{},()=>[t(e(Ve),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},Ze={__name:"CalendarPrevButton",props:{step:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:s,...u}=l;return u}),n=x(r);return(s,u)=>(d(),c(e($e),h({class:e(_)(e(G)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",l.class)},e(n)),{default:a(()=>[m(s.$slots,"default",{},()=>[t(e(Se),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},ea={__name:"Drawer",props:{activeSnapPoint:{type:[Number,String,null],required:!1},closeThreshold:{type:Number,required:!1},shouldScaleBackground:{type:Boolean,required:!1,default:!0},scrollLockTimeout:{type:Number,required:!1},fixed:{type:Boolean,required:!1},dismissible:{type:Boolean,required:!1},modal:{type:Boolean,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},nested:{type:Boolean,required:!1},snapPoints:{type:Array,required:!1},fadeFromIndex:{type:null,required:!1}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{emit:l}){const s=L(o,l);return(u,v)=>(d(),c(e(He),R(I(e(s))),{default:a(()=>[m(u.$slots,"default")]),_:3},16))}},aa={__name:"DrawerOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:n,...s}=l;return s});return(n,s)=>(d(),c(e(Oe),h(r.value,{class:e(_)("fixed inset-0 z-50 bg-black/80",l.class)}),null,16,["class"]))}},ta=g("div",{class:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"},null,-1),sa={__name:"DrawerContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:l}){const r=o,s=L(r,l);return(u,v)=>(d(),c(e(xe),null,{default:a(()=>[t(aa),t(e(je),h(e(s),{class:e(_)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",r.class)}),{default:a(()=>[ta,m(u.$slots,"default")]),_:3},16,["class"])]),_:3}))}},la={__name:"DrawerHeader",props:{class:{type:null,required:!1}},setup(o){const l=o;return(r,n)=>(d(),q("div",{class:E(e(_)("grid gap-1.5 p-4 text-center sm:text-left",l.class))},[m(r.$slots,"default")],2))}},ra={__name:"DrawerFooter",props:{class:{type:null,required:!1}},setup(o){const l=o;return(r,n)=>(d(),q("div",{class:E(e(_)("mt-auto flex flex-col gap-2 p-4",l.class))},[m(r.$slots,"default")],2))}},oa={__name:"DrawerTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:n,...s}=l;return s});return(n,s)=>(d(),c(e(be),h(r.value,{class:e(_)("text-lg font-semibold leading-none tracking-tight",l.class)}),{default:a(()=>[m(n.$slots,"default")]),_:3},16,["class"]))}},na={__name:"DrawerDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o){const l=o,r=y(()=>{const{class:n,...s}=l;return s});return(n,s)=>(d(),c(e(we),h(r.value,{class:e(_)("text-sm text-muted-foreground",l.class)}),{default:a(()=>[m(n.$slots,"default")]),_:3},16,["class"]))}},ua={class:"bg-gray-100 min-h-screen flex ml-16"},da={class:"flex-1 p-4 sm:p-8"},ia=g("h1",{class:"text-3xl font-bold mb-4 sm:mb-8"},"Transaction History",-1),ca={class:"flex justify-between items-center mb-6 space-x-4"},pa={class:"flex-grow"},fa={class:"mx-auto w-full max-w-sm"},ma={class:"p-4 space-y-4"},_a={key:0,class:"flex justify-center items-center h-64"},ya=g("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"},null,-1),ha=[ya],ga={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},qa=g("strong",{class:"font-bold"},"Error!",-1),va={class:"block sm:inline"},$a={key:2,class:"bg-white shadow-md rounded-lg overflow-hidden"},Tt={__name:"TransactionHistory",setup(o){X();const l=D([]),r=D(""),n=D("all"),s=D({from:null,to:null}),u=D(!0),v=D(null);Te(async()=>{try{await F()}catch(f){v.value="Failed to load transactions. Please try again later.",console.error("Error fetching transactions:",f)}finally{u.value=!1}});const F=async()=>{const f=Y.currentUser.uid,$=["invoices","quotes","receipts"];let p=[];for(const b of $){const z=te(se(Z,`users/${f}/accounting/settings/${b}`)),W=await le(z);p=[...p,...W.docs.map(w=>({id:w.id,type:b.slice(0,-1),date:w.data().issueDate||w.data().receiptDate,description:w.data().description||`${b.slice(0,-1)} #${w.data().invoiceNumber||w.data().quoteNumber||""}`,total:w.data().total,...w.data()}))]}l.value=p.sort((b,z)=>new Date(z.date)-new Date(b.date))},O=y(()=>l.value.filter(f=>{const $=f.description.toLowerCase().includes(r.value.toLowerCase()),p=n.value==="all"||f.type===n.value,b=(!s.value.from||new Date(f.date)>=s.value.from)&&(!s.value.to||new Date(f.date)<=s.value.to);return $&&p&&b})),B=f=>new Date(f).toLocaleDateString("en-AU",{year:"numeric",month:"long",day:"numeric"}),k=f=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(f),P=f=>{switch(f){case"invoice":return"success";case"quote":return"warning";case"receipt":return"default";default:return"default"}},j=f=>{ae.push(`/auth/accounting/${f.type}s/${f.id}`)},T=()=>{};return(f,$)=>(d(),q("div",ua,[t(re,{class:"shadow-2xl"}),g("div",da,[ia,K(" Unified Filter Controls "),g("div",ca,[g("div",pa,[t(e(ee),{modelValue:r.value,"onUpdate:modelValue":$[0]||($[0]=p=>r.value=p),placeholder:"Search transactions..."},null,8,["modelValue"])]),t(e(ea),null,{default:a(()=>[t(e(Ce),{asChild:""},{default:a(()=>[t(e(N),null,{default:a(()=>[t(e(ze),{class:"w-4 h-4 mr-2"}),i(" Filters ")]),_:1})]),_:1}),t(e(sa),null,{default:a(()=>[g("div",fa,[t(e(la),null,{default:a(()=>[t(e(oa),null,{default:a(()=>[i("Filters")]),_:1}),t(e(na),null,{default:a(()=>[i("Adjust your transaction filters.")]),_:1})]),_:1}),g("div",ma,[g("div",null,[t(e(M),null,{default:a(()=>[i("Type")]),_:1}),t(e(oe),{modelValue:n.value,"onUpdate:modelValue":$[1]||($[1]=p=>n.value=p)},{default:a(()=>[t(e(ne),null,{default:a(()=>[t(e(ue),{placeholder:"Filter by type"})]),_:1}),t(e(de),null,{default:a(()=>[t(e(A),{value:"all"},{default:a(()=>[i("All Types")]),_:1}),t(e(A),{value:"invoice"},{default:a(()=>[i("Invoice")]),_:1}),t(e(A),{value:"quote"},{default:a(()=>[i("Quote")]),_:1}),t(e(A),{value:"receipt"},{default:a(()=>[i("Receipt")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),g("div",null,[t(e(M),null,{default:a(()=>[i("Date Range")]),_:1}),t(e(Pe),null,{default:a(()=>[t(e(De),{asChild:""},{default:a(()=>[t(e(N),{variant:"outline",class:"w-full justify-start text-left font-normal"},{default:a(()=>[t(e(Ge),{class:"mr-2 h-4 w-4"}),i(" "+C(s.value.from?s.value.to?`${B(s.value.from)} - ${B(s.value.to)}`:B(s.value.from):"Pick a date range"),1)]),_:1})]),_:1}),t(e(ke),{class:"w-auto p-0",align:"start"},{default:a(()=>[t(e(Re),{modelValue:s.value,"onUpdate:modelValue":$[2]||($[2]=p=>s.value=p),mode:"range",class:"rounded-md border"},null,8,["modelValue"])]),_:1})]),_:1})])]),t(e(ra),null,{default:a(()=>[t(e(N),{onClick:T},{default:a(()=>[i("Apply Filters")]),_:1}),t(e(Be),{asChild:""},{default:a(()=>[t(e(N),{variant:"outline"},{default:a(()=>[i("Cancel")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),K(" Transactions Table "),u.value?(d(),q("div",_a,ha)):v.value?(d(),q("div",ga,[qa,g("span",va,C(v.value),1)])):(d(),q("div",$a,[t(e(Ae),null,{default:a(()=>[t(e(Fe),null,{default:a(()=>[t(e(Q),null,{default:a(()=>[t(e(U),null,{default:a(()=>[i("Date")]),_:1}),t(e(U),{class:"hidden md:table-cell"},{default:a(()=>[i("Description")]),_:1}),t(e(U),null,{default:a(()=>[i("Type")]),_:1}),t(e(U),{class:"text-right"},{default:a(()=>[i("Amount")]),_:1})]),_:1})]),_:1}),t(e(Ne),null,{default:a(()=>[(d(!0),q(V,null,S(O.value,p=>(d(),c(e(Q),{key:p.id,onClick:b=>j(p),class:"cursor-pointer hover:bg-gray-100"},{default:a(()=>[t(e(H),null,{default:a(()=>[i(C(B(p.date)),1)]),_:2},1024),t(e(H),{class:"hidden md:table-cell"},{default:a(()=>[i(C(p.description),1)]),_:2},1024),t(e(H),null,{default:a(()=>[t(e(Ue),{variant:P(p.type)},{default:a(()=>[i(C(p.type),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(H),{class:E(["text-right",p.type==="invoice"?"text-green-600":"text-red-600"])},{default:a(()=>[i(C(k(p.total)),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]))])]))}};export{Tt as default};
