import{r as k,k as Q,aj as G,b as f,d as C,e as i,L as v,J as e,E as t,M as n,u as a,Q as U,K as P,ah as q,N as H,ad as J,ae as R,m as W,D as B,P as X,T as Y}from"./@vue-DsGlF1-j.js";import{_ as z,a as g,b as y,d as Z,c as A,f as S}from"./index-fh3STtDl.js";import{a as ee,x as F,y as ae,F as te,j,u as le,E as se}from"./@firebase-CBgXa-9_.js";import{_ as oe}from"./AccountingSidebar-pKQpwrKS.js";import{d as ne,_ as ie,a as de,b as ce,c as T}from"./SelectScrollDownButton-BK2d6S2D.js";import{_ as ue,a as re,b as me}from"./TooltipTrigger-Bqh97bnl.js";import{a as pe,b as M,c as D,d as fe,e as x,_ as _e}from"./TableRow-yn4ap3en.js";import{F as w}from"./vue-sonner-B2EpXGAv.js";import"./radix-vue-6Z8x3TUN.js";import"./@internationalized-D5LszBdy.js";import"./@swc-BOtJyCjG.js";import"./@floating-ui-B6PpBHZy.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vue-router-CrvMPvpV.js";import"./firebase-BQhzl84B.js";import"./@heroicons-DH5_RU0z.js";import"./vuex--kc_uza-.js";import"./@unovis-B16_51NZ.js";import"./@emotion-Dz_S_Xyw.js";import"./stylis-YPZU7XtI.js";import"./d3-transition-fhQpLGwb.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-DY0Cqdkz.js";import"./d3-color-Ceo1QMNe.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-Ox4sgw_u.js";import"./d3-interpolate-path-CTc7ZuM7.js";import"./striptags-CDKagow6.js";import"./@vueup-qMjKR5Ws.js";import"./quill-delta-COPIFlMW.js";import"./fast-diff-DNDSwfiB.js";import"./lodash.clonedeep-CrPEM4m0.js";import"./lodash.isequal-CemT60YI.js";import"./to-px-DReLD3CO.js";import"./parse-unit-3UrBcP19.js";import"./d3-array-BJvpcdQ_.js";import"./@juggle-C8OzoCMD.js";import"./d3-axis-Cf4shvhW.js";import"./d3-scale-A6k9qkjg.js";import"./internmap-BkD7Hj8s.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-COsUQkot.js";import"./d3-time-B8hJ2rEE.js";import"./d3-shape-D7Hvm6M3.js";import"./d3-path-CimkQT29.js";import"./throttle-debounce-BnOnwhtV.js";import"./embla-carousel-vue-CXHqejTr.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-QtEXB4oT.js";import"./@vueuse-H75eWtDf.js";import"./embla-carousel-autoplay-0OO14Ffu.js";import"./@radix-icons-C7iqcNif.js";import"./vuex-persistedstate-D4njCX8q.js";import"./maska-Cp-LWreF.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";const L=m=>(J("data-v-413141d8"),m=m(),R(),m),ve={class:"bg-white shadow-md rounded-lg p-6 mb-6"},be={class:"text-2xl font-semibold mb-4"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ge=L(()=>i("p",null,"Client: A person or business you provide services to.",-1)),ye=L(()=>i("p",null,"Vendor: A person or business that provides services to you.",-1)),ke={class:"md:col-span-2"},Ce={class:"flex items-center space-x-2"},$e={key:0,class:"space-y-4"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne={class:"flex justify-end space-x-2"},De={__name:"ContactCreator",props:{editingContact:{type:Object,default:null}},emits:["save","cancel"],setup(m,{emit:$}){const c=m,p=$,l=k({name:"",email:"",phone:"",type:"client",address:"",bankDetails:{billable:!1,accountName:"",accountNumber:"",bsbNumber:""}}),b=k(!1);Q(()=>{var N,s,_,o;c.editingContact?(l.value={...c.editingContact,bankDetails:{billable:((N=c.editingContact.bankDetails)==null?void 0:N.billable)||!1,accountName:((s=c.editingContact.bankDetails)==null?void 0:s.accountName)||"",accountNumber:((_=c.editingContact.bankDetails)==null?void 0:_.accountNumber)||"",bsbNumber:((o=c.editingContact.bankDetails)==null?void 0:o.bsbNumber)||""}},b.value=!0):(l.value={name:"",email:"",phone:"",type:"client",address:"",bankDetails:{billable:!1,accountName:"",accountNumber:"",bsbNumber:""}},b.value=!1)});const V=()=>{p("save",l.value)},E=()=>{p("cancel")};return(N,s)=>{const _=G("maska");return f(),C("div",ve,[i("h2",be,v(b.value?"Edit Contact":"Add New Contact"),1),i("form",{onSubmit:H(V,["prevent"]),class:"space-y-4"},[i("div",he,[i("div",null,[e(a(g),{class:"ml-1",for:"name"},{default:t(()=>[n("Full name")]),_:1}),e(a(y),{placeholder:"John Appleseed",id:"name",modelValue:l.value.name,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value.name=o),required:""},null,8,["modelValue"])]),i("div",null,[e(a(g),{class:"ml-1",for:"email"},{default:t(()=>[n("Email address")]),_:1}),e(a(y),{placeholder:"JohnAppleseed@email.com",id:"email",type:"email",modelValue:l.value.email,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.email=o),required:""},null,8,["modelValue"])]),i("div",null,[e(a(g),{class:"ml-1",for:"phone"},{default:t(()=>[n("Phone number")]),_:1}),U(e(a(y),{"data-maska":"#### ### ###",type:"tel",placeholder:"0412 345 678",id:"phone",modelValue:l.value.phone,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.phone=o)},null,8,["modelValue"]),[[_]])]),i("div",null,[e(a(g),{class:"ml-1",for:"type"},{default:t(()=>[n("Type")]),_:1}),e(a(me),null,{default:t(()=>[e(a(ue),{asChild:""},{default:t(()=>[e(a(ne),{modelValue:l.value.type,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.type=o)},{default:t(()=>[e(a(ie),{id:"type"},{default:t(()=>[e(a(de),{placeholder:"Select type"})]),_:1}),e(a(ce),null,{default:t(()=>[e(a(T),{value:"client"},{default:t(()=>[n("Client")]),_:1}),e(a(T),{value:"vendor"},{default:t(()=>[n("Vendor")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a(re),null,{default:t(()=>[ge,ye]),_:1})]),_:1})]),i("div",ke,[e(a(g),{class:"ml-1",for:"address"},{default:t(()=>[n("Address")]),_:1}),e(a(y),{placeholder:"123 Main St, Sydney",id:"address",modelValue:l.value.address,"onUpdate:modelValue":s[4]||(s[4]=o=>l.value.address=o)},null,8,["modelValue"])])]),i("div",Ce,[e(a(Z),{id:"billable",modelValue:l.value.bankDetails.billable,"onUpdate:modelValue":s[5]||(s[5]=o=>l.value.bankDetails.billable=o),checked:l.value.bankDetails.billable,"onUpdate:checked":s[6]||(s[6]=o=>l.value.bankDetails.billable=!l.value.bankDetails.billable)},null,8,["modelValue","checked"]),e(a(g),{for:"billable"},{default:t(()=>[n("Billable (Show Bank Details)")]),_:1})]),e(q,{name:"slide-fade"},{default:t(()=>[l.value.bankDetails.billable?(f(),C("div",$e,[e(a(g),null,{default:t(()=>[n("Bank Details")]),_:1}),i("div",Ve,[e(a(y),{modelValue:l.value.bankDetails.accountName,"onUpdate:modelValue":s[7]||(s[7]=o=>l.value.bankDetails.accountName=o),placeholder:"Account Name"},null,8,["modelValue"]),U(e(a(y),{"data-maska":"##########",type:"number",modelValue:l.value.bankDetails.accountNumber,"onUpdate:modelValue":s[8]||(s[8]=o=>l.value.bankDetails.accountNumber=o),placeholder:"Account Number"},null,8,["modelValue"]),[[_]]),U(e(a(y),{"data-maska":"###-###",modelValue:l.value.bankDetails.bsbNumber,"onUpdate:modelValue":s[9]||(s[9]=o=>l.value.bankDetails.bsbNumber=o),placeholder:"BSB Number"},null,8,["modelValue"]),[[_]])])])):P("v-if",!0)]),_:1}),i("div",Ne,[e(a(A),{type:"button",variant:"outline",onClick:E},{default:t(()=>[n("Cancel")]),_:1}),e(a(A),{type:"submit"},{default:t(()=>[n(v(b.value?"Update":"Add")+" Contact",1)]),_:1})])],32)])}}},xe=z(De,[["__scopeId","data-v-413141d8"]]),I=m=>(J("data-v-cc96c4d4"),m=m(),R(),m),we={class:"bg-gray-100 min-h-screen flex ml-16"},Ae={class:"flex-1 p-4 sm:p-8"},Ee={class:"flex justify-between items-center mb-8"},Ue=I(()=>i("h1",{class:"text-3xl font-bold"},"Contacts",-1)),Se={key:0,class:"flex justify-center items-center h-64"},Ie=I(()=>i("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"},null,-1)),Be=[Ie],Fe={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},je=I(()=>i("strong",{class:"font-bold"},"Error!",-1)),Te={class:"block sm:inline"},Me={key:2,class:"bg-white shadow-md rounded-lg overflow-hidden"},Pe={__name:"AccountingContacts",setup(m){const $=ee(),c=k([]),p=k(!1),l=k(null),b=k(!0),V=k(null);W(async()=>{try{await E()}catch(u){V.value="Failed to load contacts. Please try again later.",console.error("Error fetching contacts:",u)}finally{b.value=!1}});const E=async()=>{const u=S.currentUser.uid,r=F($,`users/${u}/accounting/settings/contacts`),d=await ae(r);c.value=d.docs.map(h=>({id:h.id,...h.data()}))},N=()=>{p.value=!p.value,l.value=null},s=u=>{l.value={...u},p.value=!0},_=async u=>{if(confirm("Are you sure you want to delete this contact?"))try{const r=S.currentUser.uid;await te(j($,`users/${r}/accounting/settings/contacts`,u.id)),c.value=c.value.filter(d=>d.id!==u.id),w.success("Contact deleted successfully")}catch(r){console.error("Error deleting contact:",r),w.error("Failed to delete contact")}},o=async u=>{try{const r=S.currentUser.uid;if(l.value){const d=j($,`users/${r}/accounting/settings/contacts`,l.value.id);await le(d,u);const h=c.value.findIndex(O=>O.id===l.value.id);h!==-1&&(c.value[h]={id:l.value.id,...u}),w.success("Contact updated successfully")}else{const d=await se(F($,`users/${r}/accounting/settings/contacts`),u);c.value.push({id:d.id,...u}),w.success("Contact added successfully")}p.value=!1,l.value=null}catch(r){console.error("Error saving contact:",r),w.error("Failed to save contact")}},K=()=>{p.value=!1,l.value=null};return(u,r)=>(f(),C("div",we,[e(oe,{class:"shadow-2xl"}),i("div",Ae,[i("div",Ee,[Ue,e(a(A),{onClick:N},{default:t(()=>[n(v(p.value?"Cancel":"Add Contact"),1)]),_:1})]),e(q,{name:"slide-fade"},{default:t(()=>[p.value?(f(),B(xe,{key:0,editingContact:l.value,onSave:o,onCancel:K},null,8,["editingContact"])):P("v-if",!0)]),_:1}),b.value?(f(),C("div",Se,Be)):V.value?(f(),C("div",Fe,[je,i("span",Te,v(V.value),1)])):(f(),C("div",Me,[e(a(_e),null,{default:t(()=>[e(a(pe),null,{default:t(()=>[e(a(M),null,{default:t(()=>[e(a(D),null,{default:t(()=>[n("Name")]),_:1}),e(a(D),null,{default:t(()=>[n("Email")]),_:1}),e(a(D),null,{default:t(()=>[n("Phone")]),_:1}),e(a(D),null,{default:t(()=>[n("Type")]),_:1}),e(a(D),null,{default:t(()=>[n("Actions")]),_:1})]),_:1})]),_:1}),e(a(fe),null,{default:t(()=>[(f(!0),C(X,null,Y(c.value,d=>(f(),B(a(M),{key:d.id},{default:t(()=>[e(a(x),null,{default:t(()=>[n(v(d.name),1)]),_:2},1024),e(a(x),null,{default:t(()=>[n(v(d.email),1)]),_:2},1024),e(a(x),null,{default:t(()=>[n(v(d.phone),1)]),_:2},1024),e(a(x),null,{default:t(()=>[n(v(d.type),1)]),_:2},1024),e(a(x),null,{default:t(()=>[e(a(A),{variant:"outline",size:"sm",onClick:h=>s(d)},{default:t(()=>[n("Edit")]),_:2},1032,["onClick"]),e(a(A),{variant:"destructive",size:"sm",onClick:h=>_(d),class:"ml-2"},{default:t(()=>[n("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))])]))}},Ka=z(Pe,[["__scopeId","data-v-cc96c4d4"]]);export{Ka as default};
