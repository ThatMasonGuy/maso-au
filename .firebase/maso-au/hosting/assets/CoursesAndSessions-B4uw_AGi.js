import{D as K,C as P}from"./@firebase-7dTA5crF.js";import{i as Q,b as L,c as D,r as g}from"./index-B_BK-3TZ.js";import{_ as R,a as W,b as V,c as p,d as X,e as d}from"./TableRow-CZeARrAJ.js";import{d as E,_ as U,a as j,b as T,c as h}from"./SelectScrollDownButton-DKQIfbde.js";import{_ as Y,a as B,b as N,c as Z}from"./TabsContent-Ca-0wMpq.js";import{_ as ee}from"./AdminSidebar-D7ex7HFn.js";import{_ as te}from"./DropdownButton-CF0ptW4t.js";import{u as le}from"./useHashNavigation-BtxZ-90z.js";import{r as v,m as oe,c as z,b as u,d as _,J as l,e as n,E as o,u as e,A as ae,M as i,K as x,P as b,T as y,D as C,L as r}from"./@vue-Cc5W6W03.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";import"./radix-vue-g1r_MIx6.js";import"./@internationalized-D5LszBdy.js";import"./@swc-BOtJyCjG.js";import"./@floating-ui-rhRhKn_Q.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vue-sonner-tOpOM8Nc.js";import"./vue-router-Yx5yAxkf.js";import"./firebase-wUg9X9TS.js";import"./@heroicons-D7NO6Ex3.js";import"./vuex-F4EPD-zj.js";import"./@unovis-B91CR5fh.js";import"./@emotion-Dz_S_Xyw.js";import"./stylis-YPZU7XtI.js";import"./d3-transition-fhQpLGwb.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-DY0Cqdkz.js";import"./d3-color-Ceo1QMNe.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-Ox4sgw_u.js";import"./d3-interpolate-path-CTc7ZuM7.js";import"./striptags-PW3Qp06w.js";import"./@excalidraw-_WJHnpoj.js";import"./react-D1sI5Brr.js";import"./react-dom-9hUPJye5.js";import"./scheduler-CzFDRTuY.js";import"./to-px-DReLD3CO.js";import"./parse-unit-3UrBcP19.js";import"./d3-array-BJvpcdQ_.js";import"./@juggle-C8OzoCMD.js";import"./d3-axis-Cf4shvhW.js";import"./d3-scale-A6k9qkjg.js";import"./internmap-BkD7Hj8s.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-COsUQkot.js";import"./d3-time-B8hJ2rEE.js";import"./d3-shape-D7Hvm6M3.js";import"./d3-path-CimkQT29.js";import"./throttle-debounce-BnOnwhtV.js";import"./embla-carousel-vue-Dcvag-wm.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-QtEXB4oT.js";import"./@vueuse-CclTXppY.js";import"./embla-carousel-autoplay-0OO14Ffu.js";import"./@radix-icons-Ce5A0lVI.js";import"./vuex-persistedstate-D4njCX8q.js";import"./maska-Cp-LWreF.js";const se={class:"bg-gray-100 min-h-screen flex ml-16"},ie={class:"flex flex-col flex-1 px-4 py-6"},ne=n("h1",{class:"text-3xl font-semibold text-gray-700 mb-6"},"Courses and Sessions Management",-1),re={class:"bg-white rounded-lg shadow-md p-6"},ue=n("h2",{class:"text-2xl font-semibold"},"Upcoming Sessions",-1),de={class:"flex mt-4 space-x-4 justify-between"},me={class:"bg-white rounded-lg shadow-md py-6"},ce={class:"flex items-center justify-between px-6"},pe=n("h2",{class:"text-2xl font-semibold"},"Edit Courses",-1),_e={class:"flex mt-4 space-x-4 justify-between px-6"},fe={class:"flex md:justify-start sm:flex-wrap justify-center mt-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7 5xl:grid-cols-8 6xl:grid-cols-9 gap-6 mx-6"},he=["onClick"],ve={class:"relative"},xe=["src","alt"],be=n("div",{class:"absolute inset-x-0 bottom-0 h-[70%] group-hover:h-[90%] bg-gradient-to-b from-transparent via-transparent to-90% to-white transition-all ease-in-out duration-300"},null,-1),ye={class:"p-4 relative z-10 flex flex-col -mt-8 group-hover:-mt-12 transition-all duration-300"},Ce={class:"text-lg font-semibold mb-2"},we=["innerHTML"],Ve={class:"absolute bottom-4 inset-x-4 flex justify-between items-center text-sm text-gray-500"},$e={class:"truncate ml-2 text-right"},Ut={__name:"CoursesAndSessions",setup(ke){const w=v([]),$=v([]),m=v("all"),c=v(""),{activeTab:f,updateHash:k}=le("upcomingsessions",["editcourses","upcomingsessions"]),H=K(Q,"learningManagementSystem/tempestStudios/courses");oe(async()=>{try{const a=await P(H);w.value=a.docs.map(s=>({...s.data(),id:s.id}))}catch(a){console.error("Error fetching courses:",a)}finally{k(f.value)}});const F=a=>{g.push({name:"LMS Admin - Edit Course",params:{id:a.id}})},O=a=>{a==="bulk-import"&&g.push("/auth/learning/admin/bulkimport")},G=()=>{g.push("/auth/learning/admin/addcourse")},q=a=>{console.log("Viewing live course:",a.title),g.push({name:"LMS Admin - Sessions",params:{id:a.id}})},S=z(()=>{const a=new Set;return w.value.forEach(s=>{s.courseCategory.forEach(t=>a.add(t))}),Array.from(a)}),I=z(()=>w.value.filter(a=>{const s=m.value==="all"||a.courseCategory.includes(m.value),t=a.title.toLowerCase().includes(c.value.toLowerCase())||a.description.toLowerCase().includes(c.value.toLowerCase());return s&&t})),M=a=>new Date(a).toLocaleDateString("en-AU",{year:"numeric",month:"long",day:"numeric"}),J=a=>a.map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(", ");return(a,s)=>(u(),_("div",se,[l(ee,{class:"shadow-2xl"}),n("div",ie,[ne,l(e(Z),{modelValue:e(f),"onUpdate:modelValue":[s[4]||(s[4]=t=>ae(f)?f.value=t:null),e(k)],class:"mb-6"},{default:o(()=>[l(e(Y),null,{default:o(()=>[l(e(B),{value:"upcomingsessions"},{default:o(()=>[i("Upcoming Sessions")]),_:1}),l(e(B),{value:"editcourses"},{default:o(()=>[i("Edit Courses")]),_:1})]),_:1}),x(" Upcoming Sessions Table "),l(e(N),{value:"upcomingsessions"},{default:o(()=>[n("div",re,[ue,n("div",de,[l(e(E),{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t)},{default:o(()=>[l(e(U),{class:"w-[180px]"},{default:o(()=>[l(e(j),{placeholder:"Filter by category"})]),_:1}),l(e(T),null,{default:o(()=>[l(e(h),{value:"all"},{default:o(()=>[i("All Categories")]),_:1}),(u(!0),_(b,null,y(S.value,t=>(u(),C(e(h),{key:t,value:t},{default:o(()=>[i(r(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(L),{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),placeholder:"Search courses...",class:"max-w-[300px]"},null,8,["modelValue"])]),l(e(R),{class:"mt-4"},{default:o(()=>[l(e(W),null,{default:o(()=>[l(e(V),null,{default:o(()=>[l(e(p),null,{default:o(()=>[i("Course")]),_:1}),l(e(p),null,{default:o(()=>[i("Start Date")]),_:1}),l(e(p),null,{default:o(()=>[i("End Date")]),_:1}),l(e(p),null,{default:o(()=>[i("Capacity")]),_:1}),l(e(p),null,{default:o(()=>[i("Enrolled")]),_:1}),l(e(p),null,{default:o(()=>[i("Actions")]),_:1})]),_:1})]),_:1}),l(e(X),null,{default:o(()=>[$.value.length===0?(u(),C(e(V),{key:0},{default:o(()=>[l(e(d),{colspan:"6",class:"text-center py-4"},{default:o(()=>[i("No upcoming sessions found. ")]),_:1})]),_:1})):x("v-if",!0),(u(!0),_(b,null,y($.value,t=>(u(),C(e(V),{key:t.id},{default:o(()=>[l(e(d),null,{default:o(()=>[i(r(t.courseTitle),1)]),_:2},1024),l(e(d),null,{default:o(()=>[i(r(M(t.startDate)),1)]),_:2},1024),l(e(d),null,{default:o(()=>[i(r(M(t.endDate)),1)]),_:2},1024),l(e(d),null,{default:o(()=>[i(r(t.capacity),1)]),_:2},1024),l(e(d),null,{default:o(()=>[i(r(t.enrolled),1)]),_:2},1024),l(e(d),null,{default:o(()=>[l(e(D),{variant:"outline",size:"sm",onClick:A=>a.openSessionManagement(t)},{default:o(()=>[i("Manage")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),x(" All Courses Grid "),l(e(N),{value:"editcourses"},{default:o(()=>[n("div",me,[n("div",ce,[pe,l(te,{buttonText:"Add Course",dropdownOptions:[{label:"Bulk import",value:"bulk-import"}],onOptionSelected:O,onButtonClick:G})]),n("div",_e,[l(e(E),{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t)},{default:o(()=>[l(e(U),{class:"w-[180px]"},{default:o(()=>[l(e(j),{placeholder:"Filter by category"})]),_:1}),l(e(T),null,{default:o(()=>[l(e(h),{value:"all"},{default:o(()=>[i("All Categories")]),_:1}),(u(!0),_(b,null,y(S.value,t=>(u(),C(e(h),{key:t,value:t},{default:o(()=>[i(r(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(L),{modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=t=>c.value=t),placeholder:"Search courses...",class:"max-w-[300px]"},null,8,["modelValue"])]),n("div",fe,[n("div",ge,[x(" Course Grid "),(u(!0),_(b,null,y(I.value,t=>(u(),_("div",{key:t.courseId,onClick:A=>F(t),class:"bg-white w-72 h-[270px] rounded-lg shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer relative group overflow-hidden"},[n("div",ve,[n("img",{src:t.image,alt:t.title,class:"min-w-full h-[172px] object-cover object-center"},null,8,xe),be]),n("div",ye,[n("h3",Ce,r(t.title),1),n("div",{class:"text-sm line-clamp-2 group-hover:line-clamp-3 text-gray-600 mb-2 h-9 overflow-hidden group-hover:h-[50px] transition-all duration-300",innerHTML:t.description},null,8,we)]),n("div",Ve,[n("span",null,r(t.length.value)+" "+r(t.length.value===1?t.length.unit.slice(0,-1):t.length.unit),1),n("span",$e,r(J(t.courseCategory)),1)]),l(e(D),{class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",variant:"secondary",size:"sm",onClick:A=>q(t)},{default:o(()=>[i(" View live ")]),_:2},1032,["onClick"])],8,he))),128))])])])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])]))}};export{Ut as default};
