import{r as C,k as Q,aj as G,b as _,d as $,e as i,L as h,J as e,E as t,M as n,u as a,Q as S,K as q,ab as J,N as H,ac as R,ad as z,m as W,D as j,P as X,T as Y}from"./@vue-Cc5W6W03.js";import{_ as L,a as k,b as g,d as Z,c as w,f as B,i as A}from"./index-B_BK-3TZ.js";import{D as F,C as ee,B as ae,j as T,u as te,O as le}from"./@firebase-7dTA5crF.js";import{_ as se}from"./AccountingSidebar-BbxZfPyK.js";import{d as oe,_ as ne,a as ie,b as de,c as M}from"./SelectScrollDownButton-DKQIfbde.js";import{_ as ue,a as ce,b as re}from"./TooltipTrigger-CQaA16an.js";import{a as me,b as P,c as D,d as pe,e as N,_ as fe}from"./TableRow-CZeARrAJ.js";import{F as x}from"./vue-sonner-tOpOM8Nc.js";import"./radix-vue-g1r_MIx6.js";import"./@internationalized-D5LszBdy.js";import"./@swc-BOtJyCjG.js";import"./@floating-ui-rhRhKn_Q.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-3VKOpVsw.js";import"./vue-router-Yx5yAxkf.js";import"./firebase-wUg9X9TS.js";import"./@heroicons-D7NO6Ex3.js";import"./vuex-F4EPD-zj.js";import"./@unovis-B91CR5fh.js";import"./@emotion-Dz_S_Xyw.js";import"./stylis-YPZU7XtI.js";import"./d3-transition-fhQpLGwb.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-DY0Cqdkz.js";import"./d3-color-Ceo1QMNe.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-Ox4sgw_u.js";import"./d3-interpolate-path-CTc7ZuM7.js";import"./striptags-PW3Qp06w.js";import"./@excalidraw-_WJHnpoj.js";import"./react-D1sI5Brr.js";import"./react-dom-9hUPJye5.js";import"./scheduler-CzFDRTuY.js";import"./to-px-DReLD3CO.js";import"./parse-unit-3UrBcP19.js";import"./d3-array-BJvpcdQ_.js";import"./@juggle-C8OzoCMD.js";import"./d3-axis-Cf4shvhW.js";import"./d3-scale-A6k9qkjg.js";import"./internmap-BkD7Hj8s.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-COsUQkot.js";import"./d3-time-B8hJ2rEE.js";import"./d3-shape-D7Hvm6M3.js";import"./d3-path-CimkQT29.js";import"./throttle-debounce-BnOnwhtV.js";import"./embla-carousel-vue-Dcvag-wm.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-QtEXB4oT.js";import"./@vueuse-CclTXppY.js";import"./embla-carousel-autoplay-0OO14Ffu.js";import"./@radix-icons-Ce5A0lVI.js";import"./vuex-persistedstate-D4njCX8q.js";import"./maska-Cp-LWreF.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";const O=p=>(R("data-v-622f5575"),p=p(),z(),p),_e={class:"bg-white shadow-md rounded-lg p-6 mb-6"},ve={class:"text-2xl font-semibold mb-4"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he=O(()=>i("p",null,"Client: A person or business you provide services to.",-1)),ye=O(()=>i("p",null,"Vendor: A person or business that provides services to you.",-1)),ke={class:"md:col-span-2"},ge={class:"flex items-center space-x-2"},Ce={key:0,class:"space-y-4"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ve={class:"flex justify-end space-x-2"},De={__name:"ContactCreator",props:{editingContact:{type:Object,default:null}},emits:["save","cancel"],setup(p,{emit:f}){const u=p,r=f,l=C({name:"",email:"",phone:"",type:"client",address:"",bankDetails:{billable:!1,accountName:"",accountNumber:"",bsbNumber:""}}),v=C(!1);Q(()=>{var V,s,b,o;u.editingContact?(l.value={...u.editingContact,bankDetails:{billable:((V=u.editingContact.bankDetails)==null?void 0:V.billable)||!1,accountName:((s=u.editingContact.bankDetails)==null?void 0:s.accountName)||"",accountNumber:((b=u.editingContact.bankDetails)==null?void 0:b.accountNumber)||"",bsbNumber:((o=u.editingContact.bankDetails)==null?void 0:o.bsbNumber)||""}},v.value=!0):(l.value={name:"",email:"",phone:"",type:"client",address:"",bankDetails:{billable:!1,accountName:"",accountNumber:"",bsbNumber:""}},v.value=!1)});const U=()=>{r("save",l.value)},E=()=>{r("cancel")};return(V,s)=>{const b=G("maska");return _(),$("div",_e,[i("h2",ve,h(v.value?"Edit Contact":"Add New Contact"),1),i("form",{onSubmit:H(U,["prevent"]),class:"space-y-4"},[i("div",be,[i("div",null,[e(a(k),{class:"ml-1",for:"name"},{default:t(()=>[n("Full name")]),_:1}),e(a(g),{placeholder:"John Appleseed",id:"name",modelValue:l.value.name,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value.name=o),required:""},null,8,["modelValue"])]),i("div",null,[e(a(k),{class:"ml-1",for:"email"},{default:t(()=>[n("Email address")]),_:1}),e(a(g),{placeholder:"JohnAppleseed@email.com",id:"email",type:"email",modelValue:l.value.email,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.email=o),required:""},null,8,["modelValue"])]),i("div",null,[e(a(k),{class:"ml-1",for:"phone"},{default:t(()=>[n("Phone number")]),_:1}),S(e(a(g),{"data-maska":"#### ### ###",type:"tel",placeholder:"0412 345 678",id:"phone",modelValue:l.value.phone,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.phone=o)},null,8,["modelValue"]),[[b]])]),i("div",null,[e(a(k),{class:"ml-1",for:"type"},{default:t(()=>[n("Type")]),_:1}),e(a(re),null,{default:t(()=>[e(a(ue),{"as-child":""},{default:t(()=>[e(a(oe),{modelValue:l.value.type,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.type=o)},{default:t(()=>[e(a(ne),{id:"type"},{default:t(()=>[e(a(ie),{placeholder:"Select type"})]),_:1}),e(a(de),null,{default:t(()=>[e(a(M),{value:"client"},{default:t(()=>[n("Client")]),_:1}),e(a(M),{value:"vendor"},{default:t(()=>[n("Vendor")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a(ce),null,{default:t(()=>[he,ye]),_:1})]),_:1})]),i("div",ke,[e(a(k),{class:"ml-1",for:"address"},{default:t(()=>[n("Address")]),_:1}),e(a(g),{placeholder:"123 Main St, Sydney",id:"address",modelValue:l.value.address,"onUpdate:modelValue":s[4]||(s[4]=o=>l.value.address=o)},null,8,["modelValue"])])]),i("div",ge,[e(a(Z),{id:"billable",modelValue:l.value.bankDetails.billable,"onUpdate:modelValue":s[5]||(s[5]=o=>l.value.bankDetails.billable=o),checked:l.value.bankDetails.billable,"onUpdate:checked":s[6]||(s[6]=o=>l.value.bankDetails.billable=!l.value.bankDetails.billable)},null,8,["modelValue","checked"]),e(a(k),{for:"billable"},{default:t(()=>[n("Billable (Show Bank Details)")]),_:1})]),e(J,{name:"slide-fade"},{default:t(()=>[l.value.bankDetails.billable?(_(),$("div",Ce,[e(a(k),null,{default:t(()=>[n("Bank Details")]),_:1}),i("div",$e,[e(a(g),{modelValue:l.value.bankDetails.accountName,"onUpdate:modelValue":s[7]||(s[7]=o=>l.value.bankDetails.accountName=o),placeholder:"Account Name"},null,8,["modelValue"]),S(e(a(g),{"data-maska":"##########",type:"number",modelValue:l.value.bankDetails.accountNumber,"onUpdate:modelValue":s[8]||(s[8]=o=>l.value.bankDetails.accountNumber=o),placeholder:"Account Number"},null,8,["modelValue"]),[[b]]),S(e(a(g),{"data-maska":"###-###",modelValue:l.value.bankDetails.bsbNumber,"onUpdate:modelValue":s[9]||(s[9]=o=>l.value.bankDetails.bsbNumber=o),placeholder:"BSB Number"},null,8,["modelValue"]),[[b]])])])):q("v-if",!0)]),_:1}),i("div",Ve,[e(a(w),{type:"button",variant:"outline",onClick:E},{default:t(()=>[n("Cancel")]),_:1}),e(a(w),{type:"submit"},{default:t(()=>[n(h(v.value?"Update":"Add")+" Contact",1)]),_:1})])],32)])}}},Ne=L(De,[["__scopeId","data-v-622f5575"]]),I=p=>(R("data-v-46b2b8a3"),p=p(),z(),p),xe={class:"bg-gray-100 min-h-screen flex ml-16"},we={class:"flex-1 p-4 sm:p-8"},Ae={class:"flex justify-between items-center mb-8"},Ue=I(()=>i("h1",{class:"text-3xl font-bold"},"Contacts",-1)),Ee={key:0,class:"flex justify-center items-center h-64"},Se=I(()=>i("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"},null,-1)),Be=[Se],Ie={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},je=I(()=>i("strong",{class:"font-bold"},"Error!",-1)),Fe={class:"block sm:inline"},Te={key:2,class:"bg-white shadow-md rounded-lg overflow-hidden"},Me={__name:"AccountingContacts",setup(p){const f=C([]),u=C(!1),r=C(null),l=C(!0),v=C(null);W(async()=>{try{await U()}catch(c){v.value="Failed to load contacts. Please try again later.",console.error("Error fetching contacts:",c)}finally{l.value=!1}});const U=async()=>{const c=B.currentUser.uid,m=F(A,`users/${c}/accounting/details/contacts`),d=await ee(m);f.value=d.docs.map(y=>({id:y.id,...y.data()}))},E=()=>{u.value=!u.value,r.value=null},V=c=>{r.value={...c},u.value=!0},s=async c=>{if(confirm("Are you sure you want to delete this contact?"))try{const m=B.currentUser.uid;await ae(T(A,`users/${m}/accounting/details/contacts`,c.id)),f.value=f.value.filter(d=>d.id!==c.id),x.success("Contact deleted successfully")}catch(m){console.error("Error deleting contact:",m),x.error("Failed to delete contact")}},b=async c=>{try{const m=B.currentUser.uid;if(r.value){const d=T(A,`users/${m}/accounting/details/contacts`,r.value.id);await te(d,c);const y=f.value.findIndex(K=>K.id===r.value.id);y!==-1&&(f.value[y]={id:r.value.id,...c}),x.success("Contact updated successfully")}else{const d=await le(F(A,`users/${m}/accounting/details/contacts`),c);f.value.push({id:d.id,...c}),x.success("Contact added successfully")}u.value=!1,r.value=null}catch(m){console.error("Error saving contact:",m),x.error("Failed to save contact")}},o=()=>{u.value=!1,r.value=null};return(c,m)=>(_(),$("div",xe,[e(se,{class:"shadow-2xl"}),i("div",we,[i("div",Ae,[Ue,e(a(w),{onClick:E},{default:t(()=>[n(h(u.value?"Cancel":"Add Contact"),1)]),_:1})]),e(J,{name:"slide-fade"},{default:t(()=>[u.value?(_(),j(Ne,{key:0,editingContact:r.value,onSave:b,onCancel:o},null,8,["editingContact"])):q("v-if",!0)]),_:1}),l.value?(_(),$("div",Ee,Be)):v.value?(_(),$("div",Ie,[je,i("span",Fe,h(v.value),1)])):(_(),$("div",Te,[e(a(fe),null,{default:t(()=>[e(a(me),null,{default:t(()=>[e(a(P),null,{default:t(()=>[e(a(D),null,{default:t(()=>[n("Name")]),_:1}),e(a(D),null,{default:t(()=>[n("Email")]),_:1}),e(a(D),null,{default:t(()=>[n("Phone")]),_:1}),e(a(D),null,{default:t(()=>[n("Type")]),_:1}),e(a(D),null,{default:t(()=>[n("Actions")]),_:1})]),_:1})]),_:1}),e(a(pe),null,{default:t(()=>[(_(!0),$(X,null,Y(f.value,d=>(_(),j(a(P),{key:d.id},{default:t(()=>[e(a(N),null,{default:t(()=>[n(h(d.name),1)]),_:2},1024),e(a(N),null,{default:t(()=>[n(h(d.email),1)]),_:2},1024),e(a(N),null,{default:t(()=>[n(h(d.phone),1)]),_:2},1024),e(a(N),null,{default:t(()=>[n(h(d.type),1)]),_:2},1024),e(a(N),null,{default:t(()=>[e(a(w),{variant:"outline",size:"sm",onClick:y=>V(d)},{default:t(()=>[n("Edit")]),_:2},1032,["onClick"]),e(a(w),{variant:"destructive",size:"sm",onClick:y=>s(d),class:"ml-2"},{default:t(()=>[n("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))])]))}},za=L(Me,[["__scopeId","data-v-46b2b8a3"]]);export{za as default};
